<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Глава 5 Базовая графика | Визуализация и анализ географических данных на языке R</title>
  <meta name="description" content="Курс лекций, посвященных использованию языка программирования R для визуализации и анализа географических данных" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Глава 5 Базовая графика | Визуализация и анализ географических данных на языке R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Курс лекций, посвященных использованию языка программирования R для визуализации и анализа географических данных" />
  <meta name="github-repo" content="tsamsonov/r-geo-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Глава 5 Базовая графика | Визуализация и анализ географических данных на языке R" />
  
  <meta name="twitter:description" content="Курс лекций, посвященных использованию языка программирования R для визуализации и анализа географических данных" />
  

<meta name="author" content="Тимофей Самсонов" />


<meta name="date" content="2019-08-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tech.html"/>
<link rel="next" href="advgraphics.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.9/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.1.17/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.2/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<link href="libs/PopupTable-0.0.1/popup.css" rel="stylesheet" />
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="libs/plotly-binding-4.9.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.49.4/plotly-latest.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Визуализация и анализ географических данных на языке R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Введение</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#программное-обеспечение"><i class="fa fa-check"></i>Программное обеспечение</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#установка-и-подключение-пакетов"><i class="fa fa-check"></i>Установка и подключение пакетов</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#выполнение-программного-кода"><i class="fa fa-check"></i>Выполнение программного кода</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#установка-рабочей-директории"><i class="fa fa-check"></i>Установка рабочей директории</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#диагностические-функции"><i class="fa fa-check"></i>Диагностические функции</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#получение-справки"><i class="fa fa-check"></i>Получение справки</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#комментарии"><i class="fa fa-check"></i>Комментарии</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#стандарт-оформления-кода-на-r"><i class="fa fa-check"></i>Стандарт оформления кода на R</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#зарезервированные-слова"><i class="fa fa-check"></i>Зарезервированные слова</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#названия-переменных"><i class="fa fa-check"></i>Названия переменных</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#названия-специальных-символов"><i class="fa fa-check"></i>Названия специальных символов</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#ссылка-на-пособие"><i class="fa fa-check"></i>Ссылка на пособие</a></li>
</ul></li>
<li class="part"><span><b>I Основы языка R</b></span></li>
<li class="chapter" data-level="1" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>1</b> Типы данных, условия, ввод и вывод</a><ul>
<li class="chapter" data-level="1.1" data-path="data-types.html"><a href="data-types.html#data_types"><i class="fa fa-check"></i><b>1.1</b> Типы данных</a><ul>
<li class="chapter" data-level="1.1.1" data-path="data-types.html"><a href="data-types.html#numbers"><i class="fa fa-check"></i><b>1.1.1</b> Числа</a></li>
<li class="chapter" data-level="1.1.2" data-path="data-types.html"><a href="data-types.html#strings"><i class="fa fa-check"></i><b>1.1.2</b> Строки</a></li>
<li class="chapter" data-level="1.1.3" data-path="data-types.html"><a href="data-types.html#dates"><i class="fa fa-check"></i><b>1.1.3</b> Даты</a></li>
<li class="chapter" data-level="1.1.4" data-path="data-types.html"><a href="data-types.html#booleans"><i class="fa fa-check"></i><b>1.1.4</b> Логические</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-types.html"><a href="data-types.html#manipulations"><i class="fa fa-check"></i><b>1.2</b> Манипуляции с типами</a><ul>
<li class="chapter" data-level="1.2.1" data-path="data-types.html"><a href="data-types.html#determine_data_type"><i class="fa fa-check"></i><b>1.2.1</b> Определение типа данных</a></li>
<li class="chapter" data-level="1.2.2" data-path="data-types.html"><a href="data-types.html#conversion"><i class="fa fa-check"></i><b>1.2.2</b> Преобразование типов данных</a></li>
<li class="chapter" data-level="1.2.3" data-path="data-types.html"><a href="data-types.html#check_types"><i class="fa fa-check"></i><b>1.2.3</b> Проверка типов данных и пустых значений</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="data-types.html"><a href="data-types.html#read_write_console"><i class="fa fa-check"></i><b>1.3</b> Ввод и вывод данных в консоли</a><ul>
<li class="chapter" data-level="1.3.1" data-path="data-types.html"><a href="data-types.html#read_console"><i class="fa fa-check"></i><b>1.3.1</b> Ввод данных</a></li>
<li class="chapter" data-level="1.3.2" data-path="data-types.html"><a href="data-types.html#write_console"><i class="fa fa-check"></i><b>1.3.2</b> Вывод данных</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="data-types.html"><a href="data-types.html#ifelse"><i class="fa fa-check"></i><b>1.4</b> Условный оператор</a></li>
<li class="chapter" data-level="1.5" data-path="data-types.html"><a href="data-types.html#switch"><i class="fa fa-check"></i><b>1.5</b> Оператор переключения</a></li>
<li class="chapter" data-level="1.6" data-path="data-types.html"><a href="data-types.html#stop"><i class="fa fa-check"></i><b>1.6</b> Прерывание программы</a></li>
<li class="chapter" data-level="1.7" data-path="data-types.html"><a href="data-types.html#basics-detail"><i class="fa fa-check"></i><b>1.7</b> Технические детали</a></li>
<li class="chapter" data-level="1.8" data-path="data-types.html"><a href="data-types.html#review"><i class="fa fa-check"></i><b>1.8</b> Краткий обзор</a></li>
<li class="chapter" data-level="1.9" data-path="data-types.html"><a href="data-types.html#questions_tasks_basics"><i class="fa fa-check"></i><b>1.9</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="1.9.1" data-path="data-types.html"><a href="data-types.html#questions_basics"><i class="fa fa-check"></i><b>1.9.1</b> Вопросы</a></li>
<li class="chapter" data-level="1.9.2" data-path="data-types.html"><a href="data-types.html#tasks_basic"><i class="fa fa-check"></i><b>1.9.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>2</b> Структуры данных и циклы</a><ul>
<li class="chapter" data-level="2.1" data-path="data-structures.html"><a href="data-structures.html#data_structures_homo"><i class="fa fa-check"></i><b>2.1</b> Однородные структуры данных</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>2.1.1</b> Векторы</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-structures.html"><a href="data-structures.html#matrices"><i class="fa fa-check"></i><b>2.1.2</b> Матрицы</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-structures.html"><a href="data-structures.html#arrays"><i class="fa fa-check"></i><b>2.1.3</b> Массивы</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-structures.html"><a href="data-structures.html#heterogeneous"><i class="fa fa-check"></i><b>2.2</b> Разнородные структуры данных</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-structures.html"><a href="data-structures.html#data_frames"><i class="fa fa-check"></i><b>2.2.1</b> Фреймы данных</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>2.2.2</b> Списки</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>2.3</b> Факторы</a></li>
<li class="chapter" data-level="2.4" data-path="data-structures.html"><a href="data-structures.html#vector_desc"><i class="fa fa-check"></i><b>2.4</b> Описание структуры данных</a></li>
<li class="chapter" data-level="2.5" data-path="data-structures.html"><a href="data-structures.html#cycles"><i class="fa fa-check"></i><b>2.5</b> Циклы</a></li>
<li class="chapter" data-level="2.6" data-path="data-structures.html"><a href="data-structures.html#structures-detail"><i class="fa fa-check"></i><b>2.6</b> Технические детали</a></li>
<li class="chapter" data-level="2.7" data-path="data-structures.html"><a href="data-structures.html#review_structures"><i class="fa fa-check"></i><b>2.7</b> Краткий обзор</a></li>
<li class="chapter" data-level="2.8" data-path="data-structures.html"><a href="data-structures.html#questions_tasks_vectors"><i class="fa fa-check"></i><b>2.8</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="2.8.1" data-path="data-structures.html"><a href="data-structures.html#questions_vectors"><i class="fa fa-check"></i><b>2.8.1</b> Вопросы</a></li>
<li class="chapter" data-level="2.8.2" data-path="data-structures.html"><a href="data-structures.html#tasks_vectors"><i class="fa fa-check"></i><b>2.8.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>3</b> Табличные данные</a><ul>
<li class="chapter" data-level="3.1" data-path="tables.html"><a href="tables.html#tables_prerequisites"><i class="fa fa-check"></i><b>3.1</b> Предварительные требования</a></li>
<li class="chapter" data-level="3.2" data-path="tables.html"><a href="tables.html#tables_datastructures"><i class="fa fa-check"></i><b>3.2</b> Структуры данных</a></li>
<li class="chapter" data-level="3.3" data-path="tables.html"><a href="tables.html#tables_reading"><i class="fa fa-check"></i><b>3.3</b> Чтение</a><ul>
<li class="chapter" data-level="3.3.1" data-path="tables.html"><a href="tables.html#tables_reading_inner"><i class="fa fa-check"></i><b>3.3.1</b> Встроенные данные</a></li>
<li class="chapter" data-level="3.3.2" data-path="tables.html"><a href="tables.html#tables_reading_text"><i class="fa fa-check"></i><b>3.3.2</b> Текстовые таблицы</a></li>
<li class="chapter" data-level="3.3.3" data-path="tables.html"><a href="tables.html#tables_reading_excel"><i class="fa fa-check"></i><b>3.3.3</b> Таблицы Microsoft Excel</a></li>
<li class="chapter" data-level="3.3.4" data-path="tables.html"><a href="tables.html#tables_reading_params"><i class="fa fa-check"></i><b>3.3.4</b> Параметры</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="tables.html"><a href="tables.html#tables_view"><i class="fa fa-check"></i><b>3.4</b> Просмотр</a></li>
<li class="chapter" data-level="3.5" data-path="tables.html"><a href="tables.html#tables_elements"><i class="fa fa-check"></i><b>3.5</b> Столбцы, строки и ячейки</a><ul>
<li class="chapter" data-level="3.5.1" data-path="tables.html"><a href="tables.html#tables_elements_names"><i class="fa fa-check"></i><b>3.5.1</b> Названия</a></li>
<li class="chapter" data-level="3.5.2" data-path="tables.html"><a href="tables.html#tables_elements_columns"><i class="fa fa-check"></i><b>3.5.2</b> Обращение к столбцам</a></li>
<li class="chapter" data-level="3.5.3" data-path="tables.html"><a href="tables.html#tables_elements_rows"><i class="fa fa-check"></i><b>3.5.3</b> Обращение к строкам</a></li>
<li class="chapter" data-level="3.5.4" data-path="tables.html"><a href="tables.html#tables_elements_cells"><i class="fa fa-check"></i><b>3.5.4</b> Обращение к ячейкам</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="tables.html"><a href="tables.html#tables_manipuilations"><i class="fa fa-check"></i><b>3.6</b> Преобразования</a><ul>
<li class="chapter" data-level="3.6.1" data-path="tables.html"><a href="tables.html#tables_manipiulations_grammar"><i class="fa fa-check"></i><b>3.6.1</b> Грамматика манипуляций</a></li>
<li class="chapter" data-level="3.6.2" data-path="tables.html"><a href="tables.html#tables_manipiulations_pipeline"><i class="fa fa-check"></i><b>3.6.2</b> Конвейер манипуляций</a></li>
<li class="chapter" data-level="3.6.3" data-path="tables.html"><a href="tables.html#tables_tidy"><i class="fa fa-check"></i><b>3.6.3</b> Преобразование структуры</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="tables.html"><a href="tables.html#tables_join"><i class="fa fa-check"></i><b>3.7</b> Соединение</a></li>
<li class="chapter" data-level="3.8" data-path="tables.html"><a href="tables.html#tables_write"><i class="fa fa-check"></i><b>3.8</b> Запись</a></li>
<li class="chapter" data-level="3.9" data-path="tables.html"><a href="tables.html#tables_rules"><i class="fa fa-check"></i><b>3.9</b> Рекомендации по подготовке таблиц для чтения в R</a></li>
<li class="chapter" data-level="3.10" data-path="tables.html"><a href="tables.html#tables_review"><i class="fa fa-check"></i><b>3.10</b> Краткий обзор</a></li>
<li class="chapter" data-level="3.11" data-path="tables.html"><a href="tables.html#tables_questions"><i class="fa fa-check"></i><b>3.11</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="3.11.1" data-path="tables.html"><a href="tables.html#tables_questions_questions"><i class="fa fa-check"></i><b>3.11.1</b> Вопросы</a></li>
<li class="chapter" data-level="3.11.2" data-path="tables.html"><a href="tables.html#tables_questions_tasks"><i class="fa fa-check"></i><b>3.11.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tech.html"><a href="tech.html"><i class="fa fa-check"></i><b>4</b> Техники программирования</a><ul>
<li class="chapter" data-level="4.1" data-path="tech.html"><a href="tech.html#tech-fun"><i class="fa fa-check"></i><b>4.1</b> Функциональное программирование</a><ul>
<li class="chapter" data-level="4.1.1" data-path="tech.html"><a href="tech.html#tech-fun-functions"><i class="fa fa-check"></i><b>4.1.1</b> Функции</a></li>
<li class="chapter" data-level="4.1.2" data-path="tech.html"><a href="tech.html#tech-fun-functionals"><i class="fa fa-check"></i><b>4.1.2</b> Функционалы</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="tech.html"><a href="tech.html#tech-meta"><i class="fa fa-check"></i><b>4.2</b> Метапрограммирование</a></li>
<li class="chapter" data-level="4.3" data-path="tech.html"><a href="tech.html#tech_review"><i class="fa fa-check"></i><b>4.3</b> Краткий обзор</a></li>
<li class="chapter" data-level="4.4" data-path="tech.html"><a href="tech.html#tech_questions"><i class="fa fa-check"></i><b>4.4</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="4.4.1" data-path="tech.html"><a href="tech.html#tech_questions_questions"><i class="fa fa-check"></i><b>4.4.1</b> Вопросы</a></li>
<li class="chapter" data-level="4.4.2" data-path="tech.html"><a href="tech.html#tech_questions_tasks"><i class="fa fa-check"></i><b>4.4.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Графика и статистика</b></span></li>
<li class="chapter" data-level="5" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>5</b> Базовая графика</a><ul>
<li class="chapter" data-level="5.1" data-path="graphics.html"><a href="graphics.html#yfxcharts"><i class="fa fa-check"></i><b>5.1</b> Стандартные графики</a><ul>
<li class="chapter" data-level="5.1.1" data-path="graphics.html"><a href="graphics.html#scatterplots"><i class="fa fa-check"></i><b>5.1.1</b> Диаграммы рассеяния</a></li>
<li class="chapter" data-level="5.1.2" data-path="graphics.html"><a href="graphics.html#linear_graphs"><i class="fa fa-check"></i><b>5.1.2</b> Линейные графики</a></li>
<li class="chapter" data-level="5.1.3" data-path="graphics.html"><a href="graphics.html#graph_combining"><i class="fa fa-check"></i><b>5.1.3</b> Совмещение графиков</a></li>
<li class="chapter" data-level="5.1.4" data-path="graphics.html"><a href="graphics.html#func_parameters"><i class="fa fa-check"></i><b>5.1.4</b> Функциональные параметры</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="graphics.html"><a href="graphics.html#histograms"><i class="fa fa-check"></i><b>5.2</b> Гистограммы</a></li>
<li class="chapter" data-level="5.3" data-path="graphics.html"><a href="graphics.html#barplots"><i class="fa fa-check"></i><b>5.3</b> Столбчатые графики</a></li>
<li class="chapter" data-level="5.4" data-path="graphics.html"><a href="graphics.html#piecharts"><i class="fa fa-check"></i><b>5.4</b> Круговые (секторные) диаграммы</a></li>
<li class="chapter" data-level="5.5" data-path="graphics.html"><a href="graphics.html#colors"><i class="fa fa-check"></i><b>5.5</b> Цвет и прозрачность</a></li>
<li class="chapter" data-level="5.6" data-path="graphics.html"><a href="graphics.html#disp_settings"><i class="fa fa-check"></i><b>5.6</b> Настройки отображения</a><ul>
<li class="chapter" data-level="5.6.1" data-path="graphics.html"><a href="graphics.html#graph_params"><i class="fa fa-check"></i><b>5.6.1</b> Графические параметры</a></li>
<li class="chapter" data-level="5.6.2" data-path="graphics.html"><a href="graphics.html#axes"><i class="fa fa-check"></i><b>5.6.2</b> Разметка осей, рамка, сетка координат и произвольные линии</a></li>
<li class="chapter" data-level="5.6.3" data-path="graphics.html"><a href="graphics.html#annotations"><i class="fa fa-check"></i><b>5.6.3</b> Аннотации данных (текст на графике)</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="graphics.html"><a href="graphics.html#legend"><i class="fa fa-check"></i><b>5.7</b> Легенда</a></li>
<li class="chapter" data-level="5.8" data-path="graphics.html"><a href="graphics.html#questions_tasks_graphics"><i class="fa fa-check"></i><b>5.8</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="5.8.1" data-path="graphics.html"><a href="graphics.html#questions_graphics"><i class="fa fa-check"></i><b>5.8.1</b> Вопросы</a></li>
<li class="chapter" data-level="5.8.2" data-path="graphics.html"><a href="graphics.html#tasks_graphics"><i class="fa fa-check"></i><b>5.8.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="advgraphics.html"><a href="advgraphics.html"><i class="fa fa-check"></i><b>6</b> Продвинутая графика в R</a><ul>
<li class="chapter" data-level="6.1" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_prerequisites"><i class="fa fa-check"></i><b>6.1</b> Предварительные требования</a></li>
<li class="chapter" data-level="6.2" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_eurostat"><i class="fa fa-check"></i><b>6.2</b> Загрузка данных Евростата</a></li>
<li class="chapter" data-level="6.3" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_nasapower"><i class="fa fa-check"></i><b>6.3</b> Загрузка данных NASA POWER</a></li>
<li class="chapter" data-level="6.4" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_template"><i class="fa fa-check"></i><b>6.4</b> Базовый шаблон ggplot</a></li>
<li class="chapter" data-level="6.5" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_geoms"><i class="fa fa-check"></i><b>6.5</b> Геометрические типы и преобразования</a></li>
<li class="chapter" data-level="6.6" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_aes"><i class="fa fa-check"></i><b>6.6</b> Графические переменные и группировки</a></li>
<li class="chapter" data-level="6.7" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_coords"><i class="fa fa-check"></i><b>6.7</b> Системы координат</a></li>
<li class="chapter" data-level="6.8" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_titles"><i class="fa fa-check"></i><b>6.8</b> Названия осей и легенды</a></li>
<li class="chapter" data-level="6.9" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_axes"><i class="fa fa-check"></i><b>6.9</b> Разметка осей</a></li>
<li class="chapter" data-level="6.10" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_labels"><i class="fa fa-check"></i><b>6.10</b> Подписи и аннотации</a></li>
<li class="chapter" data-level="6.11" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_facets"><i class="fa fa-check"></i><b>6.11</b> Фасеты</a></li>
<li class="chapter" data-level="6.12" data-path="advgraphics.html"><a href="advgraphics.html#advgraphics_themes"><i class="fa fa-check"></i><b>6.12</b> Темы</a></li>
<li class="chapter" data-level="6.13" data-path="advgraphics.html"><a href="advgraphics.html#questions_tasks_advgraphics"><i class="fa fa-check"></i><b>6.13</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="6.13.1" data-path="advgraphics.html"><a href="advgraphics.html#questions_advgraphics"><i class="fa fa-check"></i><b>6.13.1</b> Вопросы</a></li>
<li class="chapter" data-level="6.13.2" data-path="advgraphics.html"><a href="advgraphics.html#tasks_advgraphics"><i class="fa fa-check"></i><b>6.13.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stat-analysis.html"><a href="stat-analysis.html"><i class="fa fa-check"></i><b>7</b> Основы статистики в R</a><ul>
<li class="chapter" data-level="7.1" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_prerequisites"><i class="fa fa-check"></i><b>7.1</b> Предварительные требования</a></li>
<li class="chapter" data-level="7.2" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_intro"><i class="fa fa-check"></i><b>7.2</b> Введение</a><ul>
<li class="chapter" data-level="7.2.1" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_intro_sources"><i class="fa fa-check"></i><b>7.2.1</b> Источники данных</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_one"><i class="fa fa-check"></i><b>7.3</b> Одна переменная</a><ul>
<li class="chapter" data-level="7.3.1" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_one_distr"><i class="fa fa-check"></i><b>7.3.1</b> Оценка распределения</a></li>
<li class="chapter" data-level="7.3.2" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_one_summary"><i class="fa fa-check"></i><b>7.3.2</b> Описательные статистики</a></li>
<li class="chapter" data-level="7.3.3" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_one_tests"><i class="fa fa-check"></i><b>7.3.3</b> Статистические тесты</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_two"><i class="fa fa-check"></i><b>7.4</b> Две переменных</a><ul>
<li class="chapter" data-level="7.4.1" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_two_distr"><i class="fa fa-check"></i><b>7.4.1</b> Оценка распределения</a></li>
<li class="chapter" data-level="7.4.2" data-path="stat-analysis.html"><a href="stat-analysis.html#stat_analysis_two_distr_correg"><i class="fa fa-check"></i><b>7.4.2</b> Корреляция и регрессия</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="stat-analysis.html"><a href="stat-analysis.html#questions_tasks_stat_analysis"><i class="fa fa-check"></i><b>7.5</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="7.5.1" data-path="stat-analysis.html"><a href="stat-analysis.html#questions_stat_analysis"><i class="fa fa-check"></i><b>7.5.1</b> Вопросы</a></li>
<li class="chapter" data-level="7.5.2" data-path="stat-analysis.html"><a href="stat-analysis.html#tasks_stat_analysis"><i class="fa fa-check"></i><b>7.5.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="circular.html"><a href="circular.html"><i class="fa fa-check"></i><b>8</b> Статистика направлений и времени</a><ul>
<li class="chapter" data-level="8.1" data-path="circular.html"><a href="circular.html#circular_prerequisites"><i class="fa fa-check"></i><b>8.1</b> Предварительные требования</a></li>
<li class="chapter" data-level="8.2" data-path="circular.html"><a href="circular.html#circular_circ"><i class="fa fa-check"></i><b>8.2</b> Статистика направлений</a><ul>
<li class="chapter" data-level="8.2.1" data-path="circular.html"><a href="circular.html#circular_circ_theory"><i class="fa fa-check"></i><b>8.2.1</b> Теория</a></li>
<li class="chapter" data-level="8.2.2" data-path="circular.html"><a href="circular.html#circular_circ_vis"><i class="fa fa-check"></i><b>8.2.2</b> Практика</a></li>
<li class="chapter" data-level="8.2.3" data-path="circular.html"><a href="circular.html#circular_tests"><i class="fa fa-check"></i><b>8.2.3</b> Статистические тесты</a></li>
<li class="chapter" data-level="8.2.4" data-path="circular.html"><a href="circular.html#circular_correlation"><i class="fa fa-check"></i><b>8.2.4</b> Корреляция и регрессия</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="circular.html"><a href="circular.html#circular_time"><i class="fa fa-check"></i><b>8.3</b> Временные ряды</a><ul>
<li class="chapter" data-level="8.3.1" data-path="circular.html"><a href="circular.html#circular_time_lubridate"><i class="fa fa-check"></i><b>8.3.1</b> Создание и преобразование дат и времени</a></li>
<li class="chapter" data-level="8.3.2" data-path="circular.html"><a href="circular.html#circular_time_complete"><i class="fa fa-check"></i><b>8.3.2</b> Восстановление пропусков и проверка корректности дат</a></li>
<li class="chapter" data-level="8.3.3" data-path="circular.html"><a href="circular.html#circular_time_interp"><i class="fa fa-check"></i><b>8.3.3</b> Интерполяция по времени</a></li>
<li class="chapter" data-level="8.3.4" data-path="circular.html"><a href="circular.html#circular_time_tests"><i class="fa fa-check"></i><b>8.3.4</b> Статистики</a></li>
<li class="chapter" data-level="8.3.5" data-path="circular.html"><a href="circular.html#circular_time_animation"><i class="fa fa-check"></i><b>8.3.5</b> Анимация</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="circular.html"><a href="circular.html#questions_tasks_circular"><i class="fa fa-check"></i><b>8.4</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="8.4.1" data-path="circular.html"><a href="circular.html#questions_circular"><i class="fa fa-check"></i><b>8.4.1</b> Вопросы</a></li>
<li class="chapter" data-level="8.4.2" data-path="circular.html"><a href="circular.html#tasks_circular"><i class="fa fa-check"></i><b>8.4.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Пространственные данные</b></span></li>
<li class="chapter" data-level="9" data-path="spatial-data.html"><a href="spatial-data.html"><i class="fa fa-check"></i><b>9</b> Пространственные данные</a><ul>
<li class="chapter" data-level="9.1" data-path="circular.html"><a href="circular.html#circular_prerequisites"><i class="fa fa-check"></i><b>9.1</b> Предварительные требования</a></li>
<li class="chapter" data-level="9.2" data-path="spatial-data.html"><a href="spatial-data.html#spatial_models"><i class="fa fa-check"></i><b>9.2</b> Модели пространственных данных</a><ul>
<li class="chapter" data-level="9.2.1" data-path="spatial-data.html"><a href="spatial-data.html#simple_features"><i class="fa fa-check"></i><b>9.2.1</b> Векторные данные</a></li>
<li class="chapter" data-level="9.2.2" data-path="spatial-data.html"><a href="spatial-data.html#raster_data"><i class="fa fa-check"></i><b>9.2.2</b> Растровые данные</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="spatial-data.html"><a href="spatial-data.html#spatref"><i class="fa fa-check"></i><b>9.3</b> Пространственная привязка</a><ul>
<li class="chapter" data-level="9.3.1" data-path="spatial-data.html"><a href="spatial-data.html#spatref_components"><i class="fa fa-check"></i><b>9.3.1</b> Компоненты пространственной привязки</a></li>
<li class="chapter" data-level="9.3.2" data-path="spatial-data.html"><a href="spatial-data.html#spatref_formats"><i class="fa fa-check"></i><b>9.3.2</b> Форматы описания пространственной привязки</a></li>
<li class="chapter" data-level="9.3.3" data-path="spatial-data.html"><a href="spatial-data.html#spatref_transform"><i class="fa fa-check"></i><b>9.3.3</b> Преобразование координат</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="spatial-data.html"><a href="spatial-data.html#vector_data_r"><i class="fa fa-check"></i><b>9.4</b> Векторные данные</a><ul>
<li class="chapter" data-level="9.4.1" data-path="spatial-data.html"><a href="spatial-data.html#vector_data_packages"><i class="fa fa-check"></i><b>9.4.1</b> Базовые библиотеки</a></li>
<li class="chapter" data-level="9.4.2" data-path="spatial-data.html"><a href="spatial-data.html#vector_data_reading"><i class="fa fa-check"></i><b>9.4.2</b> Чтение</a></li>
<li class="chapter" data-level="9.4.3" data-path="spatial-data.html"><a href="spatial-data.html#sf_structure"><i class="fa fa-check"></i><b>9.4.3</b> Внутренняя структура</a></li>
<li class="chapter" data-level="9.4.4" data-path="spatial-data.html"><a href="spatial-data.html#sf_plotting"><i class="fa fa-check"></i><b>9.4.4</b> Визуализация</a></li>
<li class="chapter" data-level="9.4.5" data-path="spatial-data.html"><a href="spatial-data.html#sf_crs"><i class="fa fa-check"></i><b>9.4.5</b> Системы координат и проекции</a></li>
<li class="chapter" data-level="9.4.6" data-path="spatial-data.html"><a href="spatial-data.html#sf_attrs"><i class="fa fa-check"></i><b>9.4.6</b> Атрибутивные операции</a></li>
<li class="chapter" data-level="9.4.7" data-path="spatial-data.html"><a href="spatial-data.html#sf_spat_selection"><i class="fa fa-check"></i><b>9.4.7</b> Пространственные операции</a></li>
<li class="chapter" data-level="9.4.8" data-path="spatial-data.html"><a href="spatial-data.html#sf_creation"><i class="fa fa-check"></i><b>9.4.8</b> Создание пространственных объектов</a></li>
<li class="chapter" data-level="9.4.9" data-path="spatial-data.html"><a href="spatial-data.html#sf_geom_attrs"><i class="fa fa-check"></i><b>9.4.9</b> Геометрические атрибуты</a></li>
<li class="chapter" data-level="9.4.10" data-path="spatial-data.html"><a href="spatial-data.html#sf_export"><i class="fa fa-check"></i><b>9.4.10</b> Экспорт</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="spatial-data.html"><a href="spatial-data.html#raster_data_r"><i class="fa fa-check"></i><b>9.5</b> Растровые данные</a><ul>
<li class="chapter" data-level="9.5.1" data-path="spatial-data.html"><a href="spatial-data.html#raster_read"><i class="fa fa-check"></i><b>9.5.1</b> Чтение</a></li>
<li class="chapter" data-level="9.5.2" data-path="spatial-data.html"><a href="spatial-data.html#raster_viz"><i class="fa fa-check"></i><b>9.5.2</b> Визуализация</a></li>
<li class="chapter" data-level="9.5.3" data-path="spatial-data.html"><a href="spatial-data.html#raster_proj"><i class="fa fa-check"></i><b>9.5.3</b> Системы координат и проекции</a></li>
<li class="chapter" data-level="9.5.4" data-path="spatial-data.html"><a href="spatial-data.html#raster_values"><i class="fa fa-check"></i><b>9.5.4</b> Операции со значениями</a></li>
<li class="chapter" data-level="9.5.5" data-path="spatial-data.html"><a href="spatial-data.html#raster_export"><i class="fa fa-check"></i><b>9.5.5</b> Экспорт</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="spatial-data.html"><a href="spatial-data.html#spatial_ggplot2"><i class="fa fa-check"></i><b>9.6</b> Визуализация средствами ggplot2</a></li>
<li class="chapter" data-level="9.7" data-path="spatial-data.html"><a href="spatial-data.html#spatial_interactive"><i class="fa fa-check"></i><b>9.7</b> Интерактивные карты</a></li>
<li class="chapter" data-level="9.8" data-path="spatial-data.html"><a href="spatial-data.html#questions_tasks_spatial"><i class="fa fa-check"></i><b>9.8</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="9.8.1" data-path="spatial-data.html"><a href="spatial-data.html#questions_spatial"><i class="fa fa-check"></i><b>9.8.1</b> Вопросы</a></li>
<li class="chapter" data-level="9.8.2" data-path="spatial-data.html"><a href="spatial-data.html#tasks_spatial"><i class="fa fa-check"></i><b>9.8.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html"><i class="fa fa-check"></i><b>10</b> Тематические карты</a><ul>
<li class="chapter" data-level="" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#предварительные-условия"><i class="fa fa-check"></i>Предварительные условия</a></li>
<li class="chapter" data-level="10.1" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_intro"><i class="fa fa-check"></i><b>10.1</b> Введение</a><ul>
<li class="chapter" data-level="10.1.1" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_intro_ne"><i class="fa fa-check"></i><b>10.1.1</b> Данные Natural Earth</a></li>
<li class="chapter" data-level="10.1.2" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_intro_wc"><i class="fa fa-check"></i><b>10.1.2</b> Данные WorldClim</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_tmap"><i class="fa fa-check"></i><b>10.2</b> Способы изображения</a><ul>
<li class="chapter" data-level="10.2.1" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_vectors"><i class="fa fa-check"></i><b>10.2.1</b> Векторные данные</a></li>
<li class="chapter" data-level="10.2.2" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_rasters"><i class="fa fa-check"></i><b>10.2.2</b> Растровые данные</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_color_scales"><i class="fa fa-check"></i><b>10.3</b> Цветовые шкалы</a></li>
<li class="chapter" data-level="10.4" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_class"><i class="fa fa-check"></i><b>10.4</b> Классификация</a><ul>
<li class="chapter" data-level="10.4.1" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_class_methods"><i class="fa fa-check"></i><b>10.4.1</b> Методы классификации</a></li>
<li class="chapter" data-level="10.4.2" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_class_application"><i class="fa fa-check"></i><b>10.4.2</b> Применение на картах</a></li>
<li class="chapter" data-level="10.4.3" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_class_application"><i class="fa fa-check"></i><b>10.4.3</b> Классификация при отображении</a></li>
<li class="chapter" data-level="10.4.4" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_na"><i class="fa fa-check"></i><b>10.4.4</b> Пропущенные данные</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_layouts"><i class="fa fa-check"></i><b>10.5</b> Компоновка</a></li>
<li class="chapter" data-level="10.6" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_facets"><i class="fa fa-check"></i><b>10.6</b> Фасеты и серии карт</a></li>
<li class="chapter" data-level="10.7" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_animations"><i class="fa fa-check"></i><b>10.7</b> Картографические анимации</a></li>
<li class="chapter" data-level="10.8" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#thematic_mapping_interactive"><i class="fa fa-check"></i><b>10.8</b> Интерактивные карты</a></li>
<li class="chapter" data-level="10.9" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#questions_tasks_tmap"><i class="fa fa-check"></i><b>10.9</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="10.9.1" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#questions_tmap"><i class="fa fa-check"></i><b>10.9.1</b> Вопросы</a></li>
<li class="chapter" data-level="10.9.2" data-path="thematic-mapping-new.html"><a href="thematic-mapping-new.html#tasks_tmap"><i class="fa fa-check"></i><b>10.9.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="vector-analysis.html"><a href="vector-analysis.html"><i class="fa fa-check"></i><b>11</b> Векторный и сетевой анализ</a><ul>
<li class="chapter" data-level="11.1" data-path="vector-analysis.html"><a href="vector-analysis.html#spatial_queries"><i class="fa fa-check"></i><b>11.1</b> Пространственные запросы</a><ul>
<li class="chapter" data-level="11.1.1" data-path="vector-analysis.html"><a href="vector-analysis.html#context_objects"><i class="fa fa-check"></i><b>11.1.1</b> Контекстные и целевые объекты</a></li>
<li class="chapter" data-level="11.1.2" data-path="vector-analysis.html"><a href="vector-analysis.html#zones"><i class="fa fa-check"></i><b>11.1.2</b> Зоны окружения объектов</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="vector-analysis.html"><a href="vector-analysis.html#use_case"><i class="fa fa-check"></i><b>11.2</b> Постановка задач и изучение данных</a></li>
<li class="chapter" data-level="11.3" data-path="vector-analysis.html"><a href="vector-analysis.html#distance_analysis"><i class="fa fa-check"></i><b>11.3</b> Анализ расстояний</a></li>
<li class="chapter" data-level="11.4" data-path="vector-analysis.html"><a href="vector-analysis.html#topology_analysis"><i class="fa fa-check"></i><b>11.4</b> Анализ взаимного положения (топологический)</a></li>
<li class="chapter" data-level="11.5" data-path="vector-analysis.html"><a href="vector-analysis.html#absolute_zones"><i class="fa fa-check"></i><b>11.5</b> Анализ абсолютных зон окружения</a></li>
<li class="chapter" data-level="11.6" data-path="vector-analysis.html"><a href="vector-analysis.html#conc_zones"><i class="fa fa-check"></i><b>11.6</b> Анализ конкурентных зон окружения</a></li>
<li class="chapter" data-level="11.7" data-path="vector-analysis.html"><a href="vector-analysis.html#transport_zones"><i class="fa fa-check"></i><b>11.7</b> Анализ зон транспортной доступности</a></li>
<li class="chapter" data-level="11.8" data-path="vector-analysis.html"><a href="vector-analysis.html#routes"><i class="fa fa-check"></i><b>11.8</b> Построение маршрутов и матриц времени движения</a></li>
<li class="chapter" data-level="11.9" data-path="vector-analysis.html"><a href="vector-analysis.html#qtasks_vector_analysis"><i class="fa fa-check"></i><b>11.9</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="11.9.1" data-path="vector-analysis.html"><a href="vector-analysis.html#questions_vector_analysis"><i class="fa fa-check"></i><b>11.9.1</b> Вопросы</a></li>
<li class="chapter" data-level="11.9.2" data-path="vector-analysis.html"><a href="vector-analysis.html#tasks_vector_analysis"><i class="fa fa-check"></i><b>11.9.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="raster-analysis.html"><a href="raster-analysis.html"><i class="fa fa-check"></i><b>12</b> Растровый анализ</a><ul>
<li class="chapter" data-level="" data-path="raster-analysis.html"><a href="raster-analysis.html#предварительные-условия-1"><i class="fa fa-check"></i>Предварительные условия</a></li>
<li class="chapter" data-level="12.1" data-path="raster-analysis.html"><a href="raster-analysis.html#raster_intro"><i class="fa fa-check"></i><b>12.1</b> Введение</a></li>
<li class="chapter" data-level="12.2" data-path="raster-analysis.html"><a href="raster-analysis.html#растровая-алгебра"><i class="fa fa-check"></i><b>12.2</b> Растровая алгебра</a><ul>
<li class="chapter" data-level="12.2.1" data-path="raster-analysis.html"><a href="raster-analysis.html#raster_local"><i class="fa fa-check"></i><b>12.2.1</b> Локальные операции</a></li>
<li class="chapter" data-level="12.2.2" data-path="raster-analysis.html"><a href="raster-analysis.html#raster_focal"><i class="fa fa-check"></i><b>12.2.2</b> Фокальные операции</a></li>
<li class="chapter" data-level="12.2.3" data-path="raster-analysis.html"><a href="raster-analysis.html#raster_zonal"><i class="fa fa-check"></i><b>12.2.3</b> Зональные операции</a></li>
<li class="chapter" data-level="12.2.4" data-path="raster-analysis.html"><a href="raster-analysis.html#raster_global"><i class="fa fa-check"></i><b>12.2.4</b> Глобальные операции</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="raster-analysis.html"><a href="raster-analysis.html#raster_extract"><i class="fa fa-check"></i><b>12.3</b> Извлечение данных</a></li>
<li class="chapter" data-level="12.4" data-path="raster-analysis.html"><a href="raster-analysis.html#questions_tasks_raster"><i class="fa fa-check"></i><b>12.4</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="12.4.1" data-path="raster-analysis.html"><a href="raster-analysis.html#questions_raster"><i class="fa fa-check"></i><b>12.4.1</b> Вопросы</a></li>
<li class="chapter" data-level="12.4.2" data-path="raster-analysis.html"><a href="raster-analysis.html#tasks_raster"><i class="fa fa-check"></i><b>12.4.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Пространственная статистика</b></span></li>
<li class="chapter" data-level="13" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html"><i class="fa fa-check"></i><b>13</b> Моделирование геополей</a><ul>
<li class="chapter" data-level="13.1" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interpolation_intro"><i class="fa fa-check"></i><b>13.1</b> Введение</a></li>
<li class="chapter" data-level="13.2" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interpolation_grid"><i class="fa fa-check"></i><b>13.2</b> Построение сетки</a></li>
<li class="chapter" data-level="13.3" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interpolation_methods"><i class="fa fa-check"></i><b>13.3</b> Интерполяционные методы</a><ul>
<li class="chapter" data-level="13.3.1" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interpolation_nn"><i class="fa fa-check"></i><b>13.3.1</b> Метод ближайшего соседа (nearest neighbour)</a></li>
<li class="chapter" data-level="13.3.2" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interpolation_tin"><i class="fa fa-check"></i><b>13.3.2</b> Интерполяция на основе триангуляции</a></li>
<li class="chapter" data-level="13.3.3" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interpolation_idw"><i class="fa fa-check"></i><b>13.3.3</b> Метод обратно взвешенных расстояний (IDW)</a></li>
<li class="chapter" data-level="13.3.4" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interpolation_rbf"><i class="fa fa-check"></i><b>13.3.4</b> Метод радиальных базисных функций (РБФ)</a></li>
<li class="chapter" data-level="13.3.5" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interpolation_bspline"><i class="fa fa-check"></i><b>13.3.5</b> Метод иерархических базисных сплайнов (B-сплайнов)</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#approximation_methods"><i class="fa fa-check"></i><b>13.4</b> Аппроксимационные методы</a><ul>
<li class="chapter" data-level="13.4.1" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#approximation_global"><i class="fa fa-check"></i><b>13.4.1</b> Глобальный тренд</a></li>
<li class="chapter" data-level="13.4.2" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#approximation_local"><i class="fa fa-check"></i><b>13.4.2</b> Локальный тренд</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#areal_interpolation"><i class="fa fa-check"></i><b>13.5</b> Интерполяция по ареалам</a></li>
<li class="chapter" data-level="13.6" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#interp_review"><i class="fa fa-check"></i><b>13.6</b> Краткий обзор</a></li>
<li class="chapter" data-level="13.7" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#questions_tasks_interp"><i class="fa fa-check"></i><b>13.7</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="13.7.1" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#questions_interp"><i class="fa fa-check"></i><b>13.7.1</b> Вопросы</a></li>
<li class="chapter" data-level="13.7.2" data-path="interpolation-deterministic.html"><a href="interpolation-deterministic.html#tasks_interp"><i class="fa fa-check"></i><b>13.7.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="kriging.html"><a href="kriging.html"><i class="fa fa-check"></i><b>14</b> Геостатистика</a><ul>
<li class="chapter" data-level="14.1" data-path="kriging.html"><a href="kriging.html#введение-1"><i class="fa fa-check"></i><b>14.1</b> Введение</a></li>
<li class="chapter" data-level="14.2" data-path="kriging.html"><a href="kriging.html#базовые-понятия-и-элементы-геостатистики"><i class="fa fa-check"></i><b>14.2</b> Базовые понятия и элементы геостатистики</a><ul>
<li class="chapter" data-level="14.2.1" data-path="kriging.html"><a href="kriging.html#базовые-понятия"><i class="fa fa-check"></i><b>14.2.1</b> Базовые понятия</a></li>
<li class="chapter" data-level="14.2.2" data-path="kriging.html"><a href="kriging.html#случайный-процесс-в-пространстве-и-его-моменты"><i class="fa fa-check"></i><b>14.2.2</b> Случайный процесс в пространстве и его моменты</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="kriging.html"><a href="kriging.html#стационарность-и-эргодичность"><i class="fa fa-check"></i><b>14.3</b> Стационарность и эргодичность</a><ul>
<li class="chapter" data-level="14.3.1" data-path="kriging.html"><a href="kriging.html#стационарность"><i class="fa fa-check"></i><b>14.3.1</b> Стационарность</a></li>
<li class="chapter" data-level="14.3.2" data-path="kriging.html"><a href="kriging.html#эргодичность"><i class="fa fa-check"></i><b>14.3.2</b> Эргодичность</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="kriging.html"><a href="kriging.html#геостатистическое-оценивание"><i class="fa fa-check"></i><b>14.4</b> Геостатистическое оценивание</a><ul>
<li class="chapter" data-level="14.4.1" data-path="kriging.html"><a href="kriging.html#простой-кригинг"><i class="fa fa-check"></i><b>14.4.1</b> Простой кригинг</a></li>
<li class="chapter" data-level="14.4.2" data-path="kriging.html"><a href="kriging.html#дисперсия-простого-кригинга"><i class="fa fa-check"></i><b>14.4.2</b> Дисперсия простого кригинга</a></li>
<li class="chapter" data-level="14.4.3" data-path="kriging.html"><a href="kriging.html#стационарность-приращений"><i class="fa fa-check"></i><b>14.4.3</b> Стационарность приращений</a></li>
<li class="chapter" data-level="14.4.4" data-path="kriging.html"><a href="kriging.html#положительная-определенность"><i class="fa fa-check"></i><b>14.4.4</b> Положительная определенность</a></li>
<li class="chapter" data-level="14.4.5" data-path="kriging.html"><a href="kriging.html#допустимые-линейные-комбинации"><i class="fa fa-check"></i><b>14.4.5</b> Допустимые линейные комбинации</a></li>
<li class="chapter" data-level="14.4.6" data-path="kriging.html"><a href="kriging.html#условная-положительная-определенность"><i class="fa fa-check"></i><b>14.4.6</b> Условная положительная определенность</a></li>
<li class="chapter" data-level="14.4.7" data-path="kriging.html"><a href="kriging.html#переход-от-ковариации-к-вариограмме"><i class="fa fa-check"></i><b>14.4.7</b> Переход от ковариации к вариограмме</a></li>
<li class="chapter" data-level="14.4.8" data-path="kriging.html"><a href="kriging.html#обычный-кригинг"><i class="fa fa-check"></i><b>14.4.8</b> Обычный кригинг</a></li>
<li class="chapter" data-level="14.4.9" data-path="kriging.html"><a href="kriging.html#дисперсия-обычного-кригинга"><i class="fa fa-check"></i><b>14.4.9</b> Дисперсия обычного кригинга</a></li>
<li class="chapter" data-level="14.4.10" data-path="kriging.html"><a href="kriging.html#универсальный-кригинг"><i class="fa fa-check"></i><b>14.4.10</b> Универсальный кригинг</a></li>
<li class="chapter" data-level="14.4.11" data-path="kriging.html"><a href="kriging.html#дисперсия-универсального-кригинга"><i class="fa fa-check"></i><b>14.4.11</b> Дисперсия универсального кригинга</a></li>
<li class="chapter" data-level="14.4.12" data-path="kriging.html"><a href="kriging.html#кросс-валидация"><i class="fa fa-check"></i><b>14.4.12</b> Кросс-валидация</a></li>
<li class="chapter" data-level="14.4.13" data-path="kriging.html"><a href="kriging.html#вариограмма"><i class="fa fa-check"></i><b>14.4.13</b> Вариограмма</a></li>
<li class="chapter" data-level="14.4.14" data-path="kriging.html"><a href="kriging.html#сферическая-модель"><i class="fa fa-check"></i><b>14.4.14</b> Сферическая модель</a></li>
<li class="chapter" data-level="14.4.15" data-path="kriging.html"><a href="kriging.html#экспоненциальная-модель"><i class="fa fa-check"></i><b>14.4.15</b> Экспоненциальная модель</a></li>
<li class="chapter" data-level="14.4.16" data-path="kriging.html"><a href="kriging.html#гауссова-модель"><i class="fa fa-check"></i><b>14.4.16</b> Гауссова модель</a></li>
<li class="chapter" data-level="14.4.17" data-path="kriging.html"><a href="kriging.html#степенная-модель"><i class="fa fa-check"></i><b>14.4.17</b> Степенная модель</a></li>
<li class="chapter" data-level="14.4.18" data-path="kriging.html"><a href="kriging.html#эффект-самородка-модель-наггет"><i class="fa fa-check"></i><b>14.4.18</b> Эффект самородка (модель наггет)</a></li>
<li class="chapter" data-level="14.4.19" data-path="kriging.html"><a href="kriging.html#диаграмма-рассеяния-с-лагом"><i class="fa fa-check"></i><b>14.4.19</b> Диаграмма рассеяния с лагом</a></li>
<li class="chapter" data-level="14.4.20" data-path="kriging.html"><a href="kriging.html#вариограммное-облако"><i class="fa fa-check"></i><b>14.4.20</b> Вариограммное облако</a></li>
<li class="chapter" data-level="14.4.21" data-path="kriging.html"><a href="kriging.html#эмпирическая-вариограмма"><i class="fa fa-check"></i><b>14.4.21</b> Эмпирическая вариограмма</a></li>
<li class="chapter" data-level="14.4.22" data-path="kriging.html"><a href="kriging.html#вариокарта"><i class="fa fa-check"></i><b>14.4.22</b> Вариокарта</a></li>
<li class="chapter" data-level="14.4.23" data-path="kriging.html"><a href="kriging.html#приближение-теоретической-модели"><i class="fa fa-check"></i><b>14.4.23</b> Приближение теоретической модели</a></li>
<li class="chapter" data-level="14.4.24" data-path="kriging.html"><a href="kriging.html#обычный-кригинг-1"><i class="fa fa-check"></i><b>14.4.24</b> Обычный кригинг</a></li>
<li class="chapter" data-level="14.4.25" data-path="kriging.html"><a href="kriging.html#обычный-кригинг-2"><i class="fa fa-check"></i><b>14.4.25</b> Обычный кригинг</a></li>
<li class="chapter" data-level="14.4.26" data-path="kriging.html"><a href="kriging.html#оценка-и-дисперсия-кригинга"><i class="fa fa-check"></i><b>14.4.26</b> Оценка и дисперсия кригинга</a></li>
<li class="chapter" data-level="14.4.27" data-path="kriging.html"><a href="kriging.html#кросс-валидация-1"><i class="fa fa-check"></i><b>14.4.27</b> Кросс-валидация</a></li>
<li class="chapter" data-level="14.4.28" data-path="kriging.html"><a href="kriging.html#кросс-валидация-2"><i class="fa fa-check"></i><b>14.4.28</b> Кросс-валидация</a></li>
<li class="chapter" data-level="14.4.29" data-path="kriging.html"><a href="kriging.html#кросс-валидация-3"><i class="fa fa-check"></i><b>14.4.29</b> Кросс-валидация</a></li>
<li class="chapter" data-level="14.4.30" data-path="kriging.html"><a href="kriging.html#кросс-валидация-4"><i class="fa fa-check"></i><b>14.4.30</b> Кросс-валидация</a></li>
<li class="chapter" data-level="14.4.31" data-path="kriging.html"><a href="kriging.html#кросс-валидация-5"><i class="fa fa-check"></i><b>14.4.31</b> Кросс-валидация</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="kriging.html"><a href="kriging.html#geostat_review"><i class="fa fa-check"></i><b>14.5</b> Краткий обзор</a></li>
<li class="chapter" data-level="14.6" data-path="kriging.html"><a href="kriging.html#geostat_qt"><i class="fa fa-check"></i><b>14.6</b> Контрольные вопросы и упражнения</a><ul>
<li class="chapter" data-level="14.6.1" data-path="kriging.html"><a href="kriging.html#geostat_q"><i class="fa fa-check"></i><b>14.6.1</b> Вопросы</a></li>
<li class="chapter" data-level="14.6.2" data-path="kriging.html"><a href="kriging.html#geostat_t"><i class="fa fa-check"></i><b>14.6.2</b> Упражнения</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="autocorrelation.html"><a href="autocorrelation.html"><i class="fa fa-check"></i><b>15</b> Пространственная регрессия</a><ul>
<li class="chapter" data-level="15.1" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_intro"><i class="fa fa-check"></i><b>15.1</b> Введение</a></li>
<li class="chapter" data-level="15.2" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_neighbors"><i class="fa fa-check"></i><b>15.2</b> Пространственное соседство</a><ul>
<li class="chapter" data-level="15.2.1" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_neighbors_contguity"><i class="fa fa-check"></i><b>15.2.1</b> Соседи по смежности</a></li>
<li class="chapter" data-level="15.2.2" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_neighbors_graph"><i class="fa fa-check"></i><b>15.2.2</b> Соседи по графу</a></li>
<li class="chapter" data-level="15.2.3" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_neighbors_metrics"><i class="fa fa-check"></i><b>15.2.3</b> Соседи по метрике</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_weights"><i class="fa fa-check"></i><b>15.3</b> Пространственные веса</a></li>
<li class="chapter" data-level="15.4" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_measures"><i class="fa fa-check"></i><b>15.4</b> Пространственная автокорреляция</a><ul>
<li class="chapter" data-level="15.4.1" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_moran"><i class="fa fa-check"></i><b>15.4.1</b> Индекс Морана (Moran’s I)</a></li>
<li class="chapter" data-level="15.4.2" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_permutation"><i class="fa fa-check"></i><b>15.4.2</b> Перестановочный тест Морана</a></li>
<li class="chapter" data-level="15.4.3" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_moranscatter"><i class="fa fa-check"></i><b>15.4.3</b> Диаграмма рассеяния Морана</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_autoregression"><i class="fa fa-check"></i><b>15.5</b> Пространственная авторегрессия</a></li>
<li class="chapter" data-level="15.6" data-path="autocorrelation.html"><a href="autocorrelation.html#autocorrelation_gwr"><i class="fa fa-check"></i><b>15.6</b> Географически взвешенная регрессия (GWR)</a></li>
<li class="chapter" data-level="15.7" data-path="autocorrelation.html"><a href="autocorrelation.html#spreg_review"><i class="fa fa-check"></i><b>15.7</b> Краткий обзор</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="point-patterns.html"><a href="point-patterns.html"><i class="fa fa-check"></i><b>16</b> Точечные процессы</a><ul>
<li class="chapter" data-level="16.1" data-path="point-patterns.html"><a href="point-patterns.html#point_review"><i class="fa fa-check"></i><b>16.1</b> Краткий обзор</a></li>
</ul></li>
<li class="appendix"><span><b>Решение проблем</b></span></li>
<li class="chapter" data-level="A" data-path="package-troubles.html"><a href="package-troubles.html"><i class="fa fa-check"></i><b>A</b> Установка пакетов</a><ul>
<li class="chapter" data-level="A.1" data-path="package-troubles.html"><a href="package-troubles.html#package-troubles-standard"><i class="fa fa-check"></i><b>A.1</b> Недоступен стандартный каталог</a></li>
<li class="chapter" data-level="A.2" data-path="package-troubles.html"><a href="package-troubles.html#package-troubles-copy"><i class="fa fa-check"></i><b>A.2</b> Устанавливается, но не копируется</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://istina.msu.ru/profile/tsamsonov/" target="blank">Тимофей Самсонов</a></li>
<li><a href="https://doi.org/10.5281/zenodo.901911"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.901911.svg" title="DOI"></a><li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Визуализация и анализ географических данных на языке R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="graphics" class="section level1">
<h1><span class="header-section-number">Глава 5</span> Базовая графика</h1>
<p><a href="https://github.com/tsamsonov/r-geo-course/blob/master/code/05-Graphics.R">Программный код главы</a></p>
<p>Данный модуль посвящен введению в работу с графическим представлением информации в R. Построение графиков на языке R сродни работе с конструктором: вы собираете изображение по кирпичикам из множества настроек и компонент. Поняв основные принципы базовой графической подсистемы <strong>R</strong> из пакета <strong>graphics</strong>, вы сможете освоить дополнительные библиотеки <strong>lattice</strong>, <strong>ggplot2</strong> и <strong>plotly</strong>, предоставляющие еще более интересные возможности с точки зрения функциональности и дизайна.</p>
<p>Прежде чем мы приступим к построению графиков, необходимо подготовить исходные данные. Мы будем работать с региональной статистикой Росстата: экспорт/импорт продукции по регионам России (млн долл. США) и объем сброса сточных вод по морям России (млрд м<span class="math inline">\(^3\)</span>):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="graphics.html#cb1-1"></a><span class="kw">library</span>(readxl)</span>
<span id="cb1-2"><a href="graphics.html#cb1-2"></a></span>
<span id="cb1-3"><a href="graphics.html#cb1-3"></a><span class="co"># Прочтем таблицу по экспорту/импорту продукции в регионах России </span></span>
<span id="cb1-4"><a href="graphics.html#cb1-4"></a>types =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;text&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;numeric&quot;</span>, <span class="dv">12</span>))</span>
<span id="cb1-5"><a href="graphics.html#cb1-5"></a>tab =<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">read_excel</span>(<span class="st">&quot;ExpImp.xlsx&quot;</span>, <span class="dv">1</span>, <span class="dt">col_types =</span> types))</span>
<span id="cb1-6"><a href="graphics.html#cb1-6"></a><span class="kw">str</span>(tab)</span>
<span id="cb1-7"><a href="graphics.html#cb1-7"></a><span class="co">## &#39;data.frame&#39;:    96 obs. of  13 variables:</span></span>
<span id="cb1-8"><a href="graphics.html#cb1-8"></a><span class="co">##  $ Регион     : chr  &quot;Российская Федерация&quot; &quot;Центральный федеральный округ&quot; &quot;Белгородская область&quot; &quot;Брянская область&quot; ...</span></span>
<span id="cb1-9"><a href="graphics.html#cb1-9"></a><span class="co">##  $ ПродЭкспорт: num  16196.2 4552.9 221.9 28.5 177.9 ...</span></span>
<span id="cb1-10"><a href="graphics.html#cb1-10"></a><span class="co">##  $ ПродИмпорт : num  43076 22954 614 650 454 ...</span></span>
<span id="cb1-11"><a href="graphics.html#cb1-11"></a><span class="co">##  $ ТЭКЭкспорт : num  371791.8 204331.7 64.7 5 0.9 ...</span></span>
<span id="cb1-12"><a href="graphics.html#cb1-12"></a><span class="co">##  $ ТЭКИмпорт  : num  3613.6 1660.3 24.1 20.5 16.7 ...</span></span>
<span id="cb1-13"><a href="graphics.html#cb1-13"></a><span class="co">##  $ ХимЭкспорт : num  30739.2 8442.7 33.3 24.5 87.7 ...</span></span>
<span id="cb1-14"><a href="graphics.html#cb1-14"></a><span class="co">##  $ ХимИмпорт  : num  50129.5 34870.4 242.8 71.7 419 ...</span></span>
<span id="cb1-15"><a href="graphics.html#cb1-15"></a><span class="co">##  $ ДревЭкспорт: num  10965.8 1101.6 6.2 23.4 57.1 ...</span></span>
<span id="cb1-16"><a href="graphics.html#cb1-16"></a><span class="co">##  $ ДревИмпорт : num  6641.5 3942.6 43.3 44.9 9 ...</span></span>
<span id="cb1-17"><a href="graphics.html#cb1-17"></a><span class="co">##  $ МетЭкспорт : num  40859.3 9877 2014.1 50.5 29 ...</span></span>
<span id="cb1-18"><a href="graphics.html#cb1-18"></a><span class="co">##  $ МетИмпорт  : num  22017.4 11763.6 1207.3 68.3 56.6 ...</span></span>
<span id="cb1-19"><a href="graphics.html#cb1-19"></a><span class="co">##  $ МашЭкспорт : num  28338.5 12845.9 84.1 143.2 286.1 ...</span></span>
<span id="cb1-20"><a href="graphics.html#cb1-20"></a><span class="co">##  $ МашИмпорт  : num  154371 96196 1710 823 469 ...</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="graphics.html#cb2-1"></a><span class="co"># Выгрузим данные по федеральным округам в отдельную таблицу</span></span>
<span id="cb2-2"><a href="graphics.html#cb2-2"></a>filter =<span class="st"> </span><span class="kw">grep</span>(<span class="st">&quot;федеральный округ&quot;</span>, tab<span class="op">$</span>Регион)</span>
<span id="cb2-3"><a href="graphics.html#cb2-3"></a>okr =<span class="st"> </span>tab[filter, ]</span>
<span id="cb2-4"><a href="graphics.html#cb2-4"></a></span>
<span id="cb2-5"><a href="graphics.html#cb2-5"></a><span class="co"># Отсортируем данные по федеральным округам в алфавитном порядке:</span></span>
<span id="cb2-6"><a href="graphics.html#cb2-6"></a>okr =<span class="st"> </span>okr[<span class="kw">order</span>(okr<span class="op">$</span>Регион), ]</span>
<span id="cb2-7"><a href="graphics.html#cb2-7"></a></span>
<span id="cb2-8"><a href="graphics.html#cb2-8"></a><span class="co"># Выгрузим данные по субъектам в отдельную таблицу</span></span>
<span id="cb2-9"><a href="graphics.html#cb2-9"></a>filter =<span class="st"> </span><span class="kw">grepl</span>(<span class="st">&quot;федеральный округ|Федерация|числе&quot;</span>,tab<span class="op">$</span>Регион)</span>
<span id="cb2-10"><a href="graphics.html#cb2-10"></a>sub =<span class="st"> </span>tab[<span class="op">!</span>filter, ]</span></code></pre></div>
<div id="yfxcharts" class="section level2">
<h2><span class="header-section-number">5.1</span> Стандартные графики</h2>
<p>Графики (точечные и линейные) – базовый и наиболее часто используемый способ визуализации. Универсальная функция <code>plot()</code> позволяет строить графики по координатам <span class="math inline">\(X\)</span> и <span class="math inline">\(Y\)</span>, которые передаются, соответственно, в первый и второй аргумент. Если переменные <span class="math inline">\(X\)</span> и <span class="math inline">\(Y\)</span> не связаны друг с другом явным образом, то такой график называется <em>диаграммой рассеяния</em>.</p>
<div id="scatterplots" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Диаграммы рассеяния</h3>
<p>Диаграмма рассеяния позволяет установить, есть ли зависимость между переменными, а также понять, как объекты дифференцируются по значениям переменных.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="graphics.html#cb3-1"></a><span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb3-2"><a href="graphics.html#cb3-2"></a><span class="co"># Диаграмма рассеяния по экспорту и импорту:</span></span>
<span id="cb3-3"><a href="graphics.html#cb3-3"></a><span class="kw">plot</span>(sub<span class="op">$</span>МетЭкспорт, </span>
<span id="cb3-4"><a href="graphics.html#cb3-4"></a>     sub<span class="op">$</span>МетИмпорт,</span>
<span id="cb3-5"><a href="graphics.html#cb3-5"></a>     <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, </span>
<span id="cb3-6"><a href="graphics.html#cb3-6"></a>     <span class="dt">xlab=</span><span class="st">&quot;Экспорт, млн. долл. США&quot;</span>, </span>
<span id="cb3-7"><a href="graphics.html#cb3-7"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Импорт, млн. долл. США&quot;</span>, </span>
<span id="cb3-8"><a href="graphics.html#cb3-8"></a>     <span class="dt">main =</span> <span class="st">&quot;Экспорт/импорт металлов и изделий из них по субъектам РФ&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>В данном случае четко выделяется группа субъектов вблизи начала координат, не отличающихся интенсивным экспортом и импортом продукции металлургии, а также очевидно преобладание экспорта над импортом при больших объемах товарооборота.</p>
<p>При построении диаграмм рассеяния важно сохранить одинаковый масштаб по осям <span class="math inline">\(X\)</span> и <span class="math inline">\(Y\)</span>. Чтобы обеспечить это условие, необходимо использовать параметр <code>asp = 1</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="graphics.html#cb4-1"></a><span class="kw">plot</span>(sub<span class="op">$</span>МетЭкспорт, </span>
<span id="cb4-2"><a href="graphics.html#cb4-2"></a>     sub<span class="op">$</span>МетИмпорт, </span>
<span id="cb4-3"><a href="graphics.html#cb4-3"></a>     <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, </span>
<span id="cb4-4"><a href="graphics.html#cb4-4"></a>     <span class="dt">xlab=</span><span class="st">&quot;Экспорт, млн. долл. США&quot;</span>, </span>
<span id="cb4-5"><a href="graphics.html#cb4-5"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Импорт, млн. долл. США&quot;</span>, </span>
<span id="cb4-6"><a href="graphics.html#cb4-6"></a>     <span class="dt">main =</span> <span class="st">&quot;Экспорт/импорт металлов и изделий из них по субъектам РФ&quot;</span>, </span>
<span id="cb4-7"><a href="graphics.html#cb4-7"></a>     <span class="dt">asp =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Попробуйте изменить размер окна на вкладке <em>Plots</em>. Вы увидите, что масштаб по осям сохраняется пропорциональным.</p>
<p><em>Размер и тип значка</em> можно изменить, используя параметры <code>pch =</code> и <code>cex =</code>. Размеры масштабируются параметром <code>cex</code> относительно условной единицы — стандартного размер значка. Сам значок можно выбрать, используя его код в соответствии с нижеприведенным рисунком (на самом деле, вы можете выбирать произвольные символы для визуализации точек):</p>
<div class="figure">
<img src="images/pch.jpg" alt="" />
<p class="caption"><em>Типы символов R</em></p>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="graphics.html#cb5-1"></a><span class="kw">plot</span>(sub<span class="op">$</span>МетЭкспорт, </span>
<span id="cb5-2"><a href="graphics.html#cb5-2"></a>     sub<span class="op">$</span>МетИмпорт, </span>
<span id="cb5-3"><a href="graphics.html#cb5-3"></a>     <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, </span>
<span id="cb5-4"><a href="graphics.html#cb5-4"></a>     <span class="dt">xlab=</span><span class="st">&quot;Экспорт, млн. долл. США&quot;</span>, </span>
<span id="cb5-5"><a href="graphics.html#cb5-5"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Импорт, млн. долл. США&quot;</span>, </span>
<span id="cb5-6"><a href="graphics.html#cb5-6"></a>     <span class="dt">main =</span> <span class="st">&quot;Экспорт/импорт металлов и изделий из них по субъектам РФ&quot;</span>, </span>
<span id="cb5-7"><a href="graphics.html#cb5-7"></a>     <span class="dt">asp =</span> <span class="dv">1</span>,</span>
<span id="cb5-8"><a href="graphics.html#cb5-8"></a>     <span class="dt">pch =</span> <span class="dv">2</span>, </span>
<span id="cb5-9"><a href="graphics.html#cb5-9"></a>     <span class="dt">cex =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="graphics.html#cb6-1"></a><span class="kw">plot</span>(sub<span class="op">$</span>МетЭкспорт, </span>
<span id="cb6-2"><a href="graphics.html#cb6-2"></a>     sub<span class="op">$</span>МетИмпорт, </span>
<span id="cb6-3"><a href="graphics.html#cb6-3"></a>     <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, </span>
<span id="cb6-4"><a href="graphics.html#cb6-4"></a>     <span class="dt">xlab=</span><span class="st">&quot;Экспорт, млн. долл. США&quot;</span>, </span>
<span id="cb6-5"><a href="graphics.html#cb6-5"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Импорт, млн. долл. США&quot;</span>, </span>
<span id="cb6-6"><a href="graphics.html#cb6-6"></a>     <span class="dt">main =</span> <span class="st">&quot;Экспорт/импорт металлов и изделий из них по субъектам РФ&quot;</span>, </span>
<span id="cb6-7"><a href="graphics.html#cb6-7"></a>     <span class="dt">asp =</span> <span class="dv">1</span>,</span>
<span id="cb6-8"><a href="graphics.html#cb6-8"></a>     <span class="dt">pch =</span> <span class="dv">20</span>, </span>
<span id="cb6-9"><a href="graphics.html#cb6-9"></a>     <span class="dt">cex =</span> <span class="fl">1.2</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
</div>
<div id="linear_graphs" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Линейные графики</h3>
<p>Линейные графики отражают связь между зависимой и независимой переменной. Существует два способа нанесения линий на график: явное рисование линий <em>поверх уже построенного графика</em> с помощью функции <code>lines()</code>, или создание нового линейного графика с помощью функции <code>plot()</code> с дополнительным параметром <code>type =</code>.</p>
<p>Для иллюстрации принципов работы первого способа откроем еще раз данные по объему сброса загрязненных сточных вод по морям России (млрд куб. м):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="graphics.html#cb7-1"></a>tab =<span class="st"> </span><span class="kw">read.csv2</span>(<span class="st">&quot;oxr_vod.csv&quot;</span>, <span class="dt">encoding =</span> <span class="st">&#39;UTF-8&#39;</span>)</span>
<span id="cb7-2"><a href="graphics.html#cb7-2"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">pch=</span><span class="dv">20</span>) <span class="co"># для начала нанесем точки</span></span>
<span id="cb7-3"><a href="graphics.html#cb7-3"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское) <span class="co"># теперь нанесем линии</span></span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>По умолчанию функция <code>plot()</code> рисует именно точки. Однако если точки не нужны, а достаточно только линий, или требуется иной подход к построению графиков, можно задать параметр <code>type =</code>, который принимает следующие значения:</p>
<ul>
<li><code>"p"</code> for points,</li>
<li><code>"l"</code> for lines,</li>
<li><code>"b"</code> for both,</li>
<li><code>"c"</code> for the lines part alone of “b”,</li>
<li><code>"o"</code> for both ‘overplotted’,</li>
<li><code>"h"</code> for ‘histogram’ like (or ‘high-density’) vertical lines,</li>
<li><code>"s"</code> for stair steps,</li>
<li><code>"S"</code> for other steps, see ‘Details’ below,</li>
<li><code>"n"</code> for no plotting.</li>
</ul>
<p>Попробуем разные методы визуализации:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="graphics.html#cb8-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское,<span class="dt">pch=</span><span class="dv">20</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="graphics.html#cb9-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="graphics.html#cb10-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-7-3.png" width="672" /></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="graphics.html#cb11-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-7-4.png" width="672" /></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="graphics.html#cb12-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-7-5.png" width="672" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="graphics.html#cb13-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;o&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-7-6.png" width="672" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="graphics.html#cb14-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;h&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-7-7.png" width="672" /></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="graphics.html#cb15-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;s&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-7-8.png" width="672" /></p>
<p><em>Толщину и тип линии</em> можно изменить, используя параметры <code>lwd =</code> и <code>lty =</code> соответственно. Работают они аналогично параметрам pch и cex для точечных символов. Типов линий по умолчанию в стандартной библиотеке R не так много, но в сочетании с цветовым кодированием и толщиной их оказывается вполне достаточно:
<img src="images/lty.png" alt="Типы линий в R" /></p>
<p>Попробуем разные варианты представления линий:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="graphics.html#cb16-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">lty =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="graphics.html#cb17-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">lwd =</span> <span class="dv">3</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="graphics.html#cb18-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">lwd =</span> <span class="dv">1</span>, <span class="dt">lty =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-8-3.png" width="672" /></p>
</div>
<div id="graph_combining" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Совмещение графиков</h3>
<p>Часто бывает необходимо совместить на одном графике несколько рядов данных. Для этого можно поступить двумя путями:</p>
<ol style="list-style-type: decimal">
<li><p>Нарисовать один ряд данных c помощью функции <code>plot()</code>, а затем добавить к нему другие ряды с помощью функций <code>points()</code> и <code>lines()</code>.</p></li>
<li><p>Нарисовать пустой график, а затем добавить к нему все ряды данных с помощью функций <code>points()</code> и <code>lines()</code>.</p></li>
</ol>
<blockquote>
<p>При совмещении нескольких рядов данных на одном графике в первом же вызове функции <code>plot()</code> необходимо заложить диапазон значений по осям <span class="math inline">\(X\)</span> и <span class="math inline">\(Y\)</span>, охватывающий все ряды данных. В противном случае будет учтен только разброс значений первого ряда данных, и остальные ряды могут не поместиться в поле графика.</p>
</blockquote>
<p>Вариант №1 реализуется следующим образом:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="graphics.html#cb19-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, </span>
<span id="cb19-2"><a href="graphics.html#cb19-2"></a>     tab<span class="op">$</span>Каспийское, </span>
<span id="cb19-3"><a href="graphics.html#cb19-3"></a>     <span class="dt">pch=</span><span class="dv">20</span>, </span>
<span id="cb19-4"><a href="graphics.html#cb19-4"></a>     <span class="dt">type=</span><span class="st">&quot;o&quot;</span>, </span>
<span id="cb19-5"><a href="graphics.html#cb19-5"></a>     <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12</span>), </span>
<span id="cb19-6"><a href="graphics.html#cb19-6"></a>     <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>)</span>
<span id="cb19-7"><a href="graphics.html#cb19-7"></a></span>
<span id="cb19-8"><a href="graphics.html#cb19-8"></a><span class="co"># Добавим теперь на существующий график новый ряд данных, используя функции points() и lines():</span></span>
<span id="cb19-9"><a href="graphics.html#cb19-9"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb19-10"><a href="graphics.html#cb19-10"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<blockquote>
<p>Обратите внимание на то, что если бы мы вызвали еще одну инструкцию <code>plot()</code> с новым рядом данных, это привело бы к построению нового графика, а не к добавлению его на существующий.</p>
</blockquote>
<p>Теперь рассмотрим второй вариант. Заодно устраним недостаток предыдущего кода, в котором диапазон значений по оси <span class="math inline">\(Y\)</span> указывался вручную.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="graphics.html#cb20-1"></a>xrange =<span class="st"> </span><span class="kw">range</span>(tab<span class="op">$</span>Год) <span class="co"># вычислим диапазон по оси X</span></span>
<span id="cb20-2"><a href="graphics.html#cb20-2"></a>yrange =<span class="st"> </span><span class="kw">range</span>(tab<span class="op">$</span>Каспийское, tab<span class="op">$</span>Карское, tab<span class="op">$</span>Азовское) <span class="co"># вычислим диапазон по оси Y</span></span>
<span id="cb20-3"><a href="graphics.html#cb20-3"></a></span>
<span id="cb20-4"><a href="graphics.html#cb20-4"></a><span class="co"># Построим пустой график, охватывающий полный диапазон данных, и имеющий все необходимые сопроводительные элементы</span></span>
<span id="cb20-5"><a href="graphics.html#cb20-5"></a><span class="kw">plot</span>(xrange,</span>
<span id="cb20-6"><a href="graphics.html#cb20-6"></a>     yrange,</span>
<span id="cb20-7"><a href="graphics.html#cb20-7"></a>     <span class="dt">main=</span><span class="st">&quot;Объем сброса загрязненных сточных вод&quot;</span>, </span>
<span id="cb20-8"><a href="graphics.html#cb20-8"></a>     <span class="dt">xlab=</span><span class="st">&quot;Год&quot;</span>, </span>
<span id="cb20-9"><a href="graphics.html#cb20-9"></a>     <span class="dt">ylab=</span><span class="st">&quot;млрд.куб.м&quot;</span>,</span>
<span id="cb20-10"><a href="graphics.html#cb20-10"></a>     <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>) <span class="co"># n означает, что ряд данных рисоваться не будет</span></span>
<span id="cb20-11"><a href="graphics.html#cb20-11"></a></span>
<span id="cb20-12"><a href="graphics.html#cb20-12"></a><span class="co"># Теперь добавим на график ряды данных</span></span>
<span id="cb20-13"><a href="graphics.html#cb20-13"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>)</span>
<span id="cb20-14"><a href="graphics.html#cb20-14"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>)</span>
<span id="cb20-15"><a href="graphics.html#cb20-15"></a></span>
<span id="cb20-16"><a href="graphics.html#cb20-16"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb20-17"><a href="graphics.html#cb20-17"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb20-18"><a href="graphics.html#cb20-18"></a></span>
<span id="cb20-19"><a href="graphics.html#cb20-19"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Азовское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;steelblue&quot;</span>)</span>
<span id="cb20-20"><a href="graphics.html#cb20-20"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Азовское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;steelblue&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="func_parameters" class="section level3">
<h3><span class="header-section-number">5.1.4</span> Функциональные параметры</h3>
<p>Графические параметры при построении графиков на самом деле могут быть не константами, а <em>функцией</em> данных. Например, вы можете сказать, что размер точки при построении диаграммы рассеяния должен быть функцией отношения экспорта к импорту, что усилит наглядность отображения:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="graphics.html#cb21-1"></a><span class="kw">plot</span>(okr<span class="op">$</span>МетЭкспорт, </span>
<span id="cb21-2"><a href="graphics.html#cb21-2"></a>     okr<span class="op">$</span>МетИмпорт, </span>
<span id="cb21-3"><a href="graphics.html#cb21-3"></a>     <span class="dt">col=</span><span class="kw">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.5</span>), </span>
<span id="cb21-4"><a href="graphics.html#cb21-4"></a>     <span class="dt">xlab=</span><span class="st">&quot;Экспорт, млн. долл. США&quot;</span>, </span>
<span id="cb21-5"><a href="graphics.html#cb21-5"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Импорт, млн. долл. США&quot;</span>, </span>
<span id="cb21-6"><a href="graphics.html#cb21-6"></a>     <span class="dt">main =</span> <span class="st">&quot;Экспорт/импорт металлов и изделий из них по ФО РФ (2013 г.)&quot;</span>, </span>
<span id="cb21-7"><a href="graphics.html#cb21-7"></a>     <span class="dt">asp =</span> <span class="dv">1</span>,</span>
<span id="cb21-8"><a href="graphics.html#cb21-8"></a>     <span class="dt">pch =</span> <span class="dv">20</span>, </span>
<span id="cb21-9"><a href="graphics.html#cb21-9"></a>     <span class="dt">cex =</span> <span class="dv">2</span><span class="op">+</span><span class="kw">log</span>(sub<span class="op">$</span>МетИмпорт<span class="op">/</span>sub<span class="op">$</span>МетЭкспорт)) <span class="co"># размер кружка зависит от соотношения импорта и экспорта</span></span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
</div>
<div id="histograms" class="section level2">
<h2><span class="header-section-number">5.2</span> Гистограммы</h2>
<p>Гистограммы распределения строятся с помощью функции <code>hist()</code>. Чтобы изменить ширину кармана (столбца) гистограммы, необходимо задать параметр <code>breaks =</code>, а цвет задается в параметре <code>col</code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="graphics.html#cb22-1"></a><span class="kw">hist</span>(sub<span class="op">$</span>ПродЭкспорт)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="graphics.html#cb23-1"></a><span class="co"># Карманы будут от 0 до 3000 через 100. Заодно добавим цвет:</span></span>
<span id="cb23-2"><a href="graphics.html#cb23-2"></a><span class="kw">hist</span>(sub<span class="op">$</span>ПродЭкспорт, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">3000</span>,<span class="dv">100</span>), <span class="dt">col=</span><span class="st">&quot;olivedrab3&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-12-2.png" width="672" /></p>
<p>При построении гистограммы (как и любого другого типа графика) вы можете использовать не весь массив данных, а только его подмножество Например, можно посмотреть гистограмму только для субъектов с объемом экспорта менее 300:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="graphics.html#cb24-1"></a><span class="kw">hist</span>(sub<span class="op">$</span>ПродЭкспорт[sub<span class="op">$</span>ПродЭкспорт <span class="op">&lt;</span><span class="st"> </span><span class="dv">300</span>], <span class="dt">col =</span> <span class="st">&quot;olivedrab3&quot;</span>, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">300</span>, <span class="dv">20</span>))</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Наконец, вы можете осуществить преобразование ряда данных перед построением гистограммы. Например, взять логарифм, чтобы проверить,похоже ли распределение на логнормальное:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="graphics.html#cb25-1"></a><span class="kw">hist</span>(<span class="kw">log</span>(sub<span class="op">$</span>ПродЭкспорт), <span class="dt">col =</span> <span class="st">&quot;olivedrab3&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
<div id="barplots" class="section level2">
<h2><span class="header-section-number">5.3</span> Столбчатые графики</h2>
<p>Столбчатые графики — <strong>barplot</strong> — отображают вектор числовых данных в виде столбиков. Это простейший вид графика (наряду с <em>dotchart</em>), который используется для сравнения абсолютных величин. Для построения необходимо вызвать функцию <code>barplot()</code> и передать ей столбец таблицы:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="graphics.html#cb26-1"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="graphics.html#cb27-1"></a></span>
<span id="cb27-2"><a href="graphics.html#cb27-2"></a><span class="co"># Или даже просто вектор натуральных чисел от -5 до 5:</span></span>
<span id="cb27-3"><a href="graphics.html#cb27-3"></a><span class="kw">barplot</span>(<span class="op">-</span><span class="dv">5</span><span class="op">:</span><span class="dv">5</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-15-2.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="graphics.html#cb28-1"></a></span>
<span id="cb28-2"><a href="graphics.html#cb28-2"></a><span class="co"># Если у каждого столбика есть название, </span></span>
<span id="cb28-3"><a href="graphics.html#cb28-3"></a><span class="co"># нужно передать вектор названий в аргумент names.arg = </span></span>
<span id="cb28-4"><a href="graphics.html#cb28-4"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, <span class="dt">names.arg =</span> okr<span class="op">$</span>Регион)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-15-3.png" width="672" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="graphics.html#cb29-1"></a></span>
<span id="cb29-2"><a href="graphics.html#cb29-2"></a><span class="co"># при наличии длинных подписей удобнее столбчатую диаграмму разместить горизонтально, используя параметр horiz = TRUE.</span></span>
<span id="cb29-3"><a href="graphics.html#cb29-3"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, <span class="dt">names.arg =</span> okr<span class="op">$</span>Регион, <span class="dt">horiz=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-15-4.png" width="672" /></p>
<p>Чтобы развернуть подписи перпендикулярно столбцам, следует использовать параметр <code>las =</code>. Справка__R__говорит нам о том, что этот параметр дает следующее поведение подписей:</p>
<ul>
<li>0: всегда параллельно осям (по умолчанию),</li>
<li>1: всегда горизонтально,</li>
<li>2: всегда перпендикулярно осям,</li>
<li>3: всегда вертикально.</li>
</ul>
<p>Выберем вариант, при котором подписи всегда горизонтальны:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="graphics.html#cb30-1"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, <span class="dt">names.arg =</span> okr<span class="op">$</span>Регион, <span class="dt">horiz=</span><span class="ot">TRUE</span>, <span class="dt">las =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>В данном случае очень массивные названия федеральных не умещаются в пространство графика. Можно было бы вполне убрать словосочетание “федеральный округ”. Для этого используем уже знакомую нам <code>sub()</code>.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="graphics.html#cb31-1"></a>names =<span class="st"> </span><span class="kw">sub</span>(<span class="st">&quot;федеральный округ&quot;</span>, <span class="st">&quot;&quot;</span>, okr<span class="op">$</span>Регион) <span class="co"># &quot;&quot; - означает пустая строка</span></span>
<span id="cb31-2"><a href="graphics.html#cb31-2"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, <span class="dt">names.arg =</span> names, <span class="dt">horiz =</span> <span class="ot">TRUE</span>, <span class="dt">las =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>И снова содержимое не поместилось в поле графика. Проблема в том, что вокруг любого графика резервируются поля ограниченного размера для размещения подписей координат и т.д. Автоматически эти поля не пересчитываются, зарезервировать их — ваша задача.</p>
<p>Наберите в консоли <code>?par</code>. Откроется список всевозможных графических параметров, которые управляют компоновкой и порядком построения графиков. Эти параметры можно установить, вызвав функцию <code>par()</code>. Все дальнейшие вызовы инструкций построения графиков будут учитывать установленные параметры Пролистайте страницу справки вниз и найдите параметр <code>mar =</code> — он отвечает за установку полей в условных единицах. Есть также параметр <code>mai =</code>, который позволяет установить поля графика в дюймах. Обратите внимание на то, что означают параметры этой функции:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="graphics.html#cb32-1"></a><span class="co"># mar=c(bottom, left, top, right)</span></span>
<span id="cb32-2"><a href="graphics.html#cb32-2"></a><span class="co"># The default is c(5, 4, 4, 2) + 0.1.</span></span></code></pre></div>
<p>Поскольку в нашем примере проблемы возникают в левым полем, необходимо увеличить второй параметр.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="graphics.html#cb33-1"></a>margins.default =<span class="st"> </span><span class="kw">par</span>(<span class="st">&quot;mar&quot;</span>) <span class="co"># запишем текущее значение, чтобы восстановить его потом</span></span>
<span id="cb33-2"><a href="graphics.html#cb33-2"></a><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">4</span>, <span class="dv">2</span>)) <span class="co"># увеличим поле left до 10 условных единиц</span></span>
<span id="cb33-3"><a href="graphics.html#cb33-3"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, <span class="dt">names.arg =</span> names, <span class="dt">horiz=</span><span class="ot">TRUE</span>, <span class="dt">las =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Добавим заголовок с помощью параметра <code>main =</code>, а подпись единиц измерения по оси <span class="math inline">\(X\)</span> — с помощью параметра <code>xlab =</code>. Поскольку количество параметров функции уже достаточно велико, введем каждый из них с новой строчки, чтобы улучшить читаемость кода:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="graphics.html#cb34-1"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb34-2"><a href="graphics.html#cb34-2"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb34-3"><a href="graphics.html#cb34-3"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb34-4"><a href="graphics.html#cb34-4"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb34-5"><a href="graphics.html#cb34-5"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb34-6"><a href="graphics.html#cb34-6"></a>        <span class="dt">las =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="graphics.html#cb35-1"></a></span>
<span id="cb35-2"><a href="graphics.html#cb35-2"></a><span class="co"># Чтобы увеличить диапазон оси X, можно использовать параметр xlim = c(min, max):</span></span>
<span id="cb35-3"><a href="graphics.html#cb35-3"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb35-4"><a href="graphics.html#cb35-4"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb35-5"><a href="graphics.html#cb35-5"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb35-6"><a href="graphics.html#cb35-6"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb35-7"><a href="graphics.html#cb35-7"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb35-8"><a href="graphics.html#cb35-8"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb35-9"><a href="graphics.html#cb35-9"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12000</span>))</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-20-2.png" width="672" /></p>
<p>Работа с цветом на столбчатых диаграммах рассмотрена ниже в отдельном разделе.</p>
</div>
<div id="piecharts" class="section level2">
<h2><span class="header-section-number">5.4</span> Круговые (секторные) диаграммы</h2>
<p>Круговые диаграммы (англ. <em>piechart</em>) строятся с помощью функции <code>pie()</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="graphics.html#cb36-1"></a><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>)) <span class="co"># установим поля</span></span>
<span id="cb36-2"><a href="graphics.html#cb36-2"></a></span>
<span id="cb36-3"><a href="graphics.html#cb36-3"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="graphics.html#cb37-1"></a></span>
<span id="cb37-2"><a href="graphics.html#cb37-2"></a><span class="co"># вместо номеров можно использовать подписи секторов, добавив второй параметр:</span></span>
<span id="cb37-3"><a href="graphics.html#cb37-3"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, names)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-21-2.png" width="672" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="graphics.html#cb38-1"></a></span>
<span id="cb38-2"><a href="graphics.html#cb38-2"></a><span class="co"># в каждую метку можно добавить процент данного округа в общей массе. Для этого его нужно сначала посчитать:</span></span>
<span id="cb38-3"><a href="graphics.html#cb38-3"></a>percentage =<span class="st"> </span><span class="dv">100</span> <span class="op">*</span><span class="st"> </span>okr<span class="op">$</span>ХимЭкспорт <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(okr<span class="op">$</span>ХимЭкспорт)</span>
<span id="cb38-4"><a href="graphics.html#cb38-4"></a></span>
<span id="cb38-5"><a href="graphics.html#cb38-5"></a><span class="co"># и округлить до 1 знака после запятой:</span></span>
<span id="cb38-6"><a href="graphics.html#cb38-6"></a>percentage =<span class="st"> </span><span class="kw">round</span>(percentage, <span class="dt">digits =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Можно присоединить проценты к названиям округов, добавив обрамляющие скобки. Чтобы функция paste не добавляя пробелы между присоединяемыми строками, необходимо задать параметр sep = , передав ему пустую строку — "":</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="graphics.html#cb39-1"></a></span>
<span id="cb39-2"><a href="graphics.html#cb39-2"></a>names2=<span class="kw">paste</span>(names, <span class="st">&quot; (&quot;</span>, percentage, <span class="st">&quot;%)&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb39-3"><a href="graphics.html#cb39-3"></a></span>
<span id="cb39-4"><a href="graphics.html#cb39-4"></a><span class="co"># Используем для аннотирования круговых секторов:</span></span>
<span id="cb39-5"><a href="graphics.html#cb39-5"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, names2)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="graphics.html#cb40-1"></a></span>
<span id="cb40-2"><a href="graphics.html#cb40-2"></a><span class="co"># Добавить заголовок можно также с помощью параметра main =</span></span>
<span id="cb40-3"><a href="graphics.html#cb40-3"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, names2, <span class="dt">main =</span> <span class="st">&quot;Доля федеральных округов в экспорте продукции химической промышленности&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-22-2.png" width="672" /></p>
<p>Чтобы перенести часть заголовка на вторую строку, вы можете использовать <strong>управляющий символ</strong> перевода строки <code>\n</code>, вставив его в требуемое место:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="graphics.html#cb41-1"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, names2, <span class="dt">main =</span> <span class="st">&quot;Доля федеральных округов в экспорте </span><span class="ch">\n</span><span class="st"> продукции химической промышленности&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<blockquote>
<p>Управляющие символы играют большое значение в программировании и используются для управления поведением текстового вывода. Нотация <code>\n</code> называется <em>escape-последовательностью</em>. Помимо перевода строки, есть и другие полезные <a href="https://ru.wikipedia.org/wiki/Управляющие_символы">управляющие символы</a>. Кстати, именно из-за того, что escape-последовательности начинаются с обратной косой черты (<code>\</code>), при указании системных путей в функции <code>setwd()</code> всегда следует использовать прямую косую черту (<code>/</code>). Например, следующий путь не будет найдет, поскольку он содержит управляющие последовательности <code>\n</code> и <code>\t</code>: <code>C:\data\tables\new</code>.</p>
</blockquote>
<p>Наконец, при использовании секторных диаграмм важно уметь менять порядок секторов. По умолчанию сектора откладываются против часовой стрелки начиная с восточного направления. Чтобы сектора откладывались по часовой стрелке с северного направления, следует задать параметр <code>clockwise = TRUE</code>.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="graphics.html#cb42-1"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb42-2"><a href="graphics.html#cb42-2"></a>    names2, </span>
<span id="cb42-3"><a href="graphics.html#cb42-3"></a>    <span class="dt">main =</span> <span class="st">&quot;Доля федеральных округов в экспорте </span><span class="ch">\n</span><span class="st"> продукции химической промышленности&quot;</span>, </span>
<span id="cb42-4"><a href="graphics.html#cb42-4"></a>    <span class="dt">clockwise =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>Работа с цветом на круговых диаграммах рассмотрена ниже в отдельном разделе.</p>
</div>
<div id="colors" class="section level2">
<h2><span class="header-section-number">5.5</span> Цвет и прозрачность</h2>
<p>Цвет — одно из основных графических средств, используемых на графиках и диаграммах, поэтому данная тема рассмотрена более подробно в отдельном разделе. Определить цвет можно различными способами. Во-первых, в <strong>R</strong> есть палитра предопределенных цветов, которые можно выбирать по их <a href="http://research.stowers-institute.org/efg/R/Color/Chart/ColorChart.pdf">названию</a>).</p>
<p>Список названий цветов можно посмотреть, вызвав функцию <code>colors()</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="graphics.html#cb43-1"></a><span class="kw">head</span>(<span class="kw">colors</span>())</span>
<span id="cb43-2"><a href="graphics.html#cb43-2"></a><span class="co">## [1] &quot;white&quot;         &quot;aliceblue&quot;     &quot;antiquewhite&quot;  &quot;antiquewhite1&quot;</span></span>
<span id="cb43-3"><a href="graphics.html#cb43-3"></a><span class="co">## [5] &quot;antiquewhite2&quot; &quot;antiquewhite3&quot;</span></span></code></pre></div>
<p>Основной цвет любого графика или диаграмма задается параметром <code>col =</code>. Это цвет (или цвета) с помощью которых будут отображаться данные. Попробуем изменить цвет графика с серого на пастельно-синий:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="graphics.html#cb44-1"></a><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">4</span>, <span class="dv">2</span>)) <span class="co"># увеличим поле left до 10 условных единиц</span></span>
<span id="cb44-2"><a href="graphics.html#cb44-2"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb44-3"><a href="graphics.html#cb44-3"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb44-4"><a href="graphics.html#cb44-4"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb44-5"><a href="graphics.html#cb44-5"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb44-6"><a href="graphics.html#cb44-6"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb44-7"><a href="graphics.html#cb44-7"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb44-8"><a href="graphics.html#cb44-8"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12000</span>), </span>
<span id="cb44-9"><a href="graphics.html#cb44-9"></a>        <span class="dt">col =</span> <span class="st">&quot;steelblue&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-26-1.png" width="672" />
Помимо этого вы можете задать цвет с помощью цветовых компонент в различных пространствах. Для этого вы должны быть знакомы с основами теории цвета (посмотрите презентацию <a href="http://research.stowers-institute.org/efg/Report/UsingColorInR.pdf">UsingColorInR.pdf</a>. Например, фиолетовый цвет в пространстве <a href="https://ru.wikipedia.org/wiki/RGB">RGB</a> можно задать с помощью функции <code>rgb()</code>, смешав синюю и красную компоненты:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="graphics.html#cb45-1"></a>violet =<span class="st"> </span><span class="kw">rgb</span>(<span class="fl">0.4</span>, <span class="dv">0</span>, <span class="fl">0.6</span>)</span>
<span id="cb45-2"><a href="graphics.html#cb45-2"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb45-3"><a href="graphics.html#cb45-3"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb45-4"><a href="graphics.html#cb45-4"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb45-5"><a href="graphics.html#cb45-5"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb45-6"><a href="graphics.html#cb45-6"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb45-7"><a href="graphics.html#cb45-7"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb45-8"><a href="graphics.html#cb45-8"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12000</span>), </span>
<span id="cb45-9"><a href="graphics.html#cb45-9"></a>        <span class="dt">col =</span> violet)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>Чтобы сделать цвет <strong>полупрозрачным</strong>, есть две возможности:</p>
<ul>
<li>При создании нового цвета — передать в функцию <code>rgb()</code> дополнительный параметр <code>alpha =</code>, который задает долю прозрачности в диапазоне от 0 до 1.</li>
<li>При модификации существующего цвета — вызвать функцию <code>adjustcolor()</code> с параметром <code>alpha =</code></li>
</ul>
<p>Например:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="graphics.html#cb46-1"></a>violet.transp =<span class="st"> </span><span class="kw">adjustcolor</span>(violet, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb46-2"><a href="graphics.html#cb46-2"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb46-3"><a href="graphics.html#cb46-3"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb46-4"><a href="graphics.html#cb46-4"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb46-5"><a href="graphics.html#cb46-5"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb46-6"><a href="graphics.html#cb46-6"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb46-7"><a href="graphics.html#cb46-7"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb46-8"><a href="graphics.html#cb46-8"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12000</span>), </span>
<span id="cb46-9"><a href="graphics.html#cb46-9"></a>        <span class="dt">col =</span> violet.transp)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="graphics.html#cb47-1"></a></span>
<span id="cb47-2"><a href="graphics.html#cb47-2"></a>green.transp =<span class="st"> </span><span class="kw">rgb</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="fl">0.5</span>) <span class="co"># появился четвертый параметр</span></span>
<span id="cb47-3"><a href="graphics.html#cb47-3"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb47-4"><a href="graphics.html#cb47-4"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb47-5"><a href="graphics.html#cb47-5"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb47-6"><a href="graphics.html#cb47-6"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb47-7"><a href="graphics.html#cb47-7"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb47-8"><a href="graphics.html#cb47-8"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb47-9"><a href="graphics.html#cb47-9"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12000</span>), </span>
<span id="cb47-10"><a href="graphics.html#cb47-10"></a>        <span class="dt">col =</span> green.transp)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-28-2.png" width="672" /></p>
<blockquote>
<p>Функция <code>adjustcolor()</code> позволяет модифицировать все компоненты цвета, не только прозрачность.</p>
</blockquote>
<p>На графике типа <em>barplot</em> вы имеете фактически несколько переменных, которые представлены столбиками. А это означает что для них можно использовать различные цвета. Вы можете передать в параметр <code>col =</code> вектор из цветов, соответствующих столбикам:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="graphics.html#cb48-1"></a>colors =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;pink&quot;</span>, <span class="st">&quot;white&quot;</span>,<span class="st">&quot;black&quot;</span>)</span>
<span id="cb48-2"><a href="graphics.html#cb48-2"></a></span>
<span id="cb48-3"><a href="graphics.html#cb48-3"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb48-4"><a href="graphics.html#cb48-4"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb48-5"><a href="graphics.html#cb48-5"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb48-6"><a href="graphics.html#cb48-6"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb48-7"><a href="graphics.html#cb48-7"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb48-8"><a href="graphics.html#cb48-8"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb48-9"><a href="graphics.html#cb48-9"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12000</span>), </span>
<span id="cb48-10"><a href="graphics.html#cb48-10"></a>        <span class="dt">col =</span> colors)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>На самом деле, такой винегрет из цветов на столбчатых диаграммах использовать не принято. Но вы должны понимать, что при необходимости можно поменять цвет отдельно выбранных столбиков. Например, мы можем показать красным цветом Центральный и Приволжский округа, которые являются лидерами по экспорту продукции химической промышленности:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="graphics.html#cb49-1"></a>colors =<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;gray&quot;</span>, <span class="dv">8</span>) <span class="co"># сделаем 8 серых цветов</span></span>
<span id="cb49-2"><a href="graphics.html#cb49-2"></a>colors[<span class="dv">2</span>] =<span class="st"> &quot;red&quot;</span></span>
<span id="cb49-3"><a href="graphics.html#cb49-3"></a>colors[<span class="dv">7</span>] =<span class="st"> &quot;red&quot;</span></span>
<span id="cb49-4"><a href="graphics.html#cb49-4"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb49-5"><a href="graphics.html#cb49-5"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb49-6"><a href="graphics.html#cb49-6"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb49-7"><a href="graphics.html#cb49-7"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb49-8"><a href="graphics.html#cb49-8"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb49-9"><a href="graphics.html#cb49-9"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb49-10"><a href="graphics.html#cb49-10"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12000</span>), </span>
<span id="cb49-11"><a href="graphics.html#cb49-11"></a>        <span class="dt">col =</span> colors)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>Еще одна интересная особенность использования цвета заключается в том, что количество указанных цветом может не совпадать с количеством рядов данных. Вы можете указать 2 или 3 цвета, и они будут циклически повторяться при визуализации данных:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="graphics.html#cb50-1"></a>colors=<span class="kw">c</span>(<span class="st">&quot;gray&quot;</span>,<span class="st">&quot;steelblue&quot;</span>)</span>
<span id="cb50-2"><a href="graphics.html#cb50-2"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb50-3"><a href="graphics.html#cb50-3"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb50-4"><a href="graphics.html#cb50-4"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb50-5"><a href="graphics.html#cb50-5"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb50-6"><a href="graphics.html#cb50-6"></a>        <span class="dt">horiz =</span><span class="ot">TRUE</span>, </span>
<span id="cb50-7"><a href="graphics.html#cb50-7"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb50-8"><a href="graphics.html#cb50-8"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">12000</span>), </span>
<span id="cb50-9"><a href="graphics.html#cb50-9"></a>        <span class="dt">col =</span> colors)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>Наконец, вещь, которой совершенно необходимо уметь пользоваться при работе с цветом в <strong>R</strong> — это цветовые палитры. Палитры чрезвычайно удобны, когда необходимо сгенерировать множество цветов, зная лишь основные оттенки. Для этого нужно создать палитру, используя функцию <code>colorRampPalette()</code>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="graphics.html#cb51-1"></a><span class="co"># задаем 2 опорных цвета: черный  белый</span></span>
<span id="cb51-2"><a href="graphics.html#cb51-2"></a>palet=<span class="kw">colorRampPalette</span>(<span class="kw">c</span>(<span class="st">&quot;black&quot;</span>,<span class="st">&quot;white&quot;</span>)) </span>
<span id="cb51-3"><a href="graphics.html#cb51-3"></a></span>
<span id="cb51-4"><a href="graphics.html#cb51-4"></a><span class="co"># и автоматически генерируем 8 цветов между ними:</span></span>
<span id="cb51-5"><a href="graphics.html#cb51-5"></a>colors=<span class="kw">palet</span>(<span class="dv">8</span>)</span>
<span id="cb51-6"><a href="graphics.html#cb51-6"></a></span>
<span id="cb51-7"><a href="graphics.html#cb51-7"></a><span class="co"># используем их для отображения:</span></span>
<span id="cb51-8"><a href="graphics.html#cb51-8"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb51-9"><a href="graphics.html#cb51-9"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb51-10"><a href="graphics.html#cb51-10"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb51-11"><a href="graphics.html#cb51-11"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb51-12"><a href="graphics.html#cb51-12"></a>        <span class="dt">horiz =</span> <span class="ot">TRUE</span>, </span>
<span id="cb51-13"><a href="graphics.html#cb51-13"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb51-14"><a href="graphics.html#cb51-14"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">12000</span>), </span>
<span id="cb51-15"><a href="graphics.html#cb51-15"></a>        <span class="dt">col=</span> colors)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="graphics.html#cb52-1"></a></span>
<span id="cb52-2"><a href="graphics.html#cb52-2"></a><span class="co"># вы можете включить в палитру произвольное количество цветов:</span></span>
<span id="cb52-3"><a href="graphics.html#cb52-3"></a>palet=<span class="kw">colorRampPalette</span>(<span class="kw">c</span>(<span class="st">&quot;steelblue&quot;</span>,<span class="st">&quot;white&quot;</span>,<span class="st">&quot;purple4&quot;</span>)) </span>
<span id="cb52-4"><a href="graphics.html#cb52-4"></a>colors=<span class="kw">palet</span>(<span class="dv">8</span>)</span>
<span id="cb52-5"><a href="graphics.html#cb52-5"></a><span class="kw">barplot</span>(okr<span class="op">$</span>ХимЭкспорт, </span>
<span id="cb52-6"><a href="graphics.html#cb52-6"></a>        <span class="dt">names.arg =</span> names, </span>
<span id="cb52-7"><a href="graphics.html#cb52-7"></a>        <span class="dt">main =</span> <span class="st">&quot;Экспорт продукции химической промышленности&quot;</span>, </span>
<span id="cb52-8"><a href="graphics.html#cb52-8"></a>        <span class="dt">xlab =</span> <span class="st">&quot;млн долл. США&quot;</span>, </span>
<span id="cb52-9"><a href="graphics.html#cb52-9"></a>        <span class="dt">horiz=</span><span class="ot">TRUE</span>, </span>
<span id="cb52-10"><a href="graphics.html#cb52-10"></a>        <span class="dt">las =</span> <span class="dv">1</span>, </span>
<span id="cb52-11"><a href="graphics.html#cb52-11"></a>        <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">12000</span>), </span>
<span id="cb52-12"><a href="graphics.html#cb52-12"></a>        <span class="dt">col=</span> colors)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-32-2.png" width="672" /></p>
<p>В <strong>R</strong> существует множество стандартных палитр, их список можно найти в справке и документации. Наиболее полезные из них:</p>
<ul>
<li><code>colors()</code></li>
<li><code>gray()</code></li>
<li><code>rainbow()</code></li>
<li><code>heat.colors()</code></li>
<li><code>topo.colors()</code></li>
<li><code>terrain.colors()</code></li>
</ul>
<p>Например, вы можете изменить цвета диаграммы, взяв их из одной из палитр или выбрав случайным образом из полной палитры цветов, используя функцию <code>sample()</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="graphics.html#cb53-1"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, names2, <span class="dt">main =</span> <span class="st">&quot;Доля федеральных округов в экспорте </span><span class="ch">\n</span><span class="st"> продукции химической промышленности&quot;</span>, <span class="dt">col=</span><span class="kw">rainbow</span>(<span class="kw">length</span>(names2)))</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="graphics.html#cb54-1"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, names2, <span class="dt">main =</span> <span class="st">&quot;Доля федеральных округов в экспорте </span><span class="ch">\n</span><span class="st"> продукции химической промышленности&quot;</span>, <span class="dt">col=</span><span class="kw">sample</span>(<span class="kw">colors</span>(),<span class="dv">5</span>))</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-33-2.png" width="672" /></p>
<p>Более богатый набор палитр можно найти в библиотеке <code>RColorBrewer</code>, которая представляет собой интерпретацию палитр, доступных на сайте <a href="http://colorbrewer2.org/">colorbrewer2.org</a></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="graphics.html#cb55-1"></a><span class="kw">library</span>(RColorBrewer) <span class="co"># Откроем библиотеку RColorBrewer:</span></span>
<span id="cb55-2"><a href="graphics.html#cb55-2"></a><span class="kw">display.brewer.all</span>() <span class="co"># Посмотрим, какие в ней имеются палитры</span></span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<p>К каждой из этих палитр можно обратиться по названию с помощью функции <code>brewer.pal()</code>. Поскольку нам необходимы цвета для категориальных данных, следует использовать палитры из средней части (<em>Set3 - Accent</em>)</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="graphics.html#cb56-1"></a><span class="co"># выберем цвета из палитры Set2 по количеству секторов в круге:</span></span>
<span id="cb56-2"><a href="graphics.html#cb56-2"></a>colors =<span class="st"> </span><span class="kw">brewer.pal</span>(<span class="kw">length</span>(names2),<span class="st">&quot;Set1&quot;</span>)</span>
<span id="cb56-3"><a href="graphics.html#cb56-3"></a></span>
<span id="cb56-4"><a href="graphics.html#cb56-4"></a><span class="co"># И используем их при визуализации</span></span>
<span id="cb56-5"><a href="graphics.html#cb56-5"></a><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>)) <span class="co"># установим поля</span></span>
<span id="cb56-6"><a href="graphics.html#cb56-6"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, names2, <span class="dt">main =</span> <span class="st">&quot;Доля федеральных округов в экспорте </span><span class="ch">\n</span><span class="st"> продукции химической промышленности&quot;</span>, <span class="dt">col=</span>colors)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="graphics.html#cb57-1"></a></span>
<span id="cb57-2"><a href="graphics.html#cb57-2"></a><span class="co"># Попробуем палитру Accent:</span></span>
<span id="cb57-3"><a href="graphics.html#cb57-3"></a><span class="kw">pie</span>(okr<span class="op">$</span>ХимЭкспорт, names2, <span class="dt">main =</span> <span class="st">&quot;Доля федеральных округов в экспорте </span><span class="ch">\n</span><span class="st"> продукции химической промышленности&quot;</span>, <span class="dt">col=</span><span class="kw">brewer.pal</span>(<span class="kw">length</span>(names2),<span class="st">&quot;Accent&quot;</span>))</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-37-2.png" width="672" /></p>
</div>
<div id="disp_settings" class="section level2">
<h2><span class="header-section-number">5.6</span> Настройки отображения</h2>
<div id="graph_params" class="section level3">
<h3><span class="header-section-number">5.6.1</span> Графические параметры</h3>
<p>Изменять <strong>размеры элементов графика</strong> можно независимо друг от друга, используя следующие параметры:</p>
<ul>
<li><code>cex</code> — общий масштаб элементов на графике</li>
<li><code>cex.axis</code> — масштаб подписей координат на оси</li>
<li><code>cex.lab</code> — масштаб подписей названий осей</li>
<li><code>cex.main</code> — масштаб заголовка графика</li>
<li><code>cex.sub</code> — масштаб подзаголовка графика</li>
<li><code>cex.names</code> — масштаб подписей факторов (для некоторых типов диаграмм)</li>
</ul>
<p>Например:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="graphics.html#cb58-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, </span>
<span id="cb58-2"><a href="graphics.html#cb58-2"></a>     tab<span class="op">$</span>Каспийское, </span>
<span id="cb58-3"><a href="graphics.html#cb58-3"></a>     <span class="dt">pch=</span><span class="dv">20</span>, </span>
<span id="cb58-4"><a href="graphics.html#cb58-4"></a>     <span class="dt">type=</span><span class="st">&quot;o&quot;</span>, </span>
<span id="cb58-5"><a href="graphics.html#cb58-5"></a>     <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12</span>), </span>
<span id="cb58-6"><a href="graphics.html#cb58-6"></a>     <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>, </span>
<span id="cb58-7"><a href="graphics.html#cb58-7"></a>     <span class="dt">main=</span><span class="st">&quot;Объем сброса загрязненных сточных вод&quot;</span>, </span>
<span id="cb58-8"><a href="graphics.html#cb58-8"></a>     <span class="dt">xlab=</span><span class="st">&quot;Год&quot;</span>, </span>
<span id="cb58-9"><a href="graphics.html#cb58-9"></a>     <span class="dt">ylab=</span><span class="st">&quot;млрд.куб.м&quot;</span>,</span>
<span id="cb58-10"><a href="graphics.html#cb58-10"></a>     <span class="dt">cex.axis=</span><span class="fl">0.8</span>, </span>
<span id="cb58-11"><a href="graphics.html#cb58-11"></a>     <span class="dt">cex.lab=</span><span class="fl">0.7</span>, </span>
<span id="cb58-12"><a href="graphics.html#cb58-12"></a>     <span class="dt">cex.main=</span><span class="fl">0.9</span>, </span>
<span id="cb58-13"><a href="graphics.html#cb58-13"></a>     <span class="dt">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb58-14"><a href="graphics.html#cb58-14"></a></span>
<span id="cb58-15"><a href="graphics.html#cb58-15"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>,<span class="dt">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb58-16"><a href="graphics.html#cb58-16"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb58-17"><a href="graphics.html#cb58-17"></a></span>
<span id="cb58-18"><a href="graphics.html#cb58-18"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Азовское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;steelblue&quot;</span>,<span class="dt">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb58-19"><a href="graphics.html#cb58-19"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Азовское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;steelblue&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>Аналогично происходит тонкая настройка <strong>цвета</strong>:</p>
<ul>
<li><code>col</code> цвет графика</li>
<li><code>col.axis</code> цвет подписей координат</li>
<li><code>col.lab</code> цвет названий осей</li>
<li><code>col.main</code> цвет заголовка</li>
<li><code>col.sub</code> цвет подзаголовка</li>
<li><code>fg</code> цвет элементов переднего плана (оси, рамка и т.д.)</li>
<li><code>bg</code> цвет фона графика (background)</li>
</ul>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="graphics.html#cb59-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, </span>
<span id="cb59-2"><a href="graphics.html#cb59-2"></a>     tab<span class="op">$</span>Каспийское, </span>
<span id="cb59-3"><a href="graphics.html#cb59-3"></a>     <span class="dt">pch=</span><span class="dv">20</span>, </span>
<span id="cb59-4"><a href="graphics.html#cb59-4"></a>     <span class="dt">type=</span><span class="st">&quot;o&quot;</span>, </span>
<span id="cb59-5"><a href="graphics.html#cb59-5"></a>     <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">12</span>), </span>
<span id="cb59-6"><a href="graphics.html#cb59-6"></a>     <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>, </span>
<span id="cb59-7"><a href="graphics.html#cb59-7"></a>     <span class="dt">main=</span><span class="st">&quot;Объем сброса загрязненных сточных вод&quot;</span>, </span>
<span id="cb59-8"><a href="graphics.html#cb59-8"></a>     <span class="dt">xlab=</span><span class="st">&quot;Год&quot;</span>, </span>
<span id="cb59-9"><a href="graphics.html#cb59-9"></a>     <span class="dt">ylab=</span><span class="st">&quot;млрд.куб.м&quot;</span>,</span>
<span id="cb59-10"><a href="graphics.html#cb59-10"></a>     <span class="dt">cex.axis=</span><span class="fl">0.8</span>, </span>
<span id="cb59-11"><a href="graphics.html#cb59-11"></a>     <span class="dt">cex.lab=</span><span class="fl">0.7</span>, </span>
<span id="cb59-12"><a href="graphics.html#cb59-12"></a>     <span class="dt">cex.main=</span><span class="fl">0.9</span>, </span>
<span id="cb59-13"><a href="graphics.html#cb59-13"></a>     <span class="dt">col.lab =</span> <span class="st">&quot;grey50&quot;</span>, </span>
<span id="cb59-14"><a href="graphics.html#cb59-14"></a>     <span class="dt">fg =</span> <span class="st">&quot;grey40&quot;</span>)</span>
<span id="cb59-15"><a href="graphics.html#cb59-15"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb59-16"><a href="graphics.html#cb59-16"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb59-17"><a href="graphics.html#cb59-17"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Азовское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;steelblue&quot;</span>)</span>
<span id="cb59-18"><a href="graphics.html#cb59-18"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Азовское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;steelblue&quot;</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/plotcolors-1.png" width="672" /></p>
</div>
<div id="axes" class="section level3">
<h3><span class="header-section-number">5.6.2</span> Разметка осей, рамка, сетка координат и произвольные линии</h3>
<p>По умолчанию <strong>R</strong> подбирает оптимальный с точки зрения него шаг разметки осей, в зависимости от разброса значений по осям <span class="math inline">\(X\)</span> и <span class="math inline">\(Y\)</span>, а также размеров графического устройства, на котором производится рисование. Изменяя размер окна прорисовки, вы получите различную разметку осей.</p>
<p>В то же время, часто возникает желание (или необходимость) самостоятельно управлять шагом разметки сетки. Для этого необходимо:</p>
<ol style="list-style-type: decimal">
<li>Вызвать функцию <code>plot()</code>, передав ей дополнительно параметр <code>axes = FALSE</code> (убирает при рисовании обе оси) или один из параметров <code>xaxt="n"</code> / <code>yaxt="n"</code> (убирают оси <span class="math inline">\(X\)</span> и <span class="math inline">\(Y\)</span> соответственно)</li>
<li>Вызвать столько раз функцию <code>axis()</code>, сколько вы хотите нарисовать осей, передав ей параметры для рисования каждой оси.</li>
</ol>
<p>Функция <code>axis()</code> принимает следующие параметры:</p>
<ul>
<li><code>side</code> — сторона графика, на которой будет нарисована ось (<code>1=bottom</code>, <code>2=left</code>, <code>3=top</code>, <code>4=right</code>)</li>
<li><code>at</code> — вектор значений, в которых должны быть нарисованы метки оси</li>
<li><code>labels</code> — вектор подписей, которые будут нарисованы в местоположениях, указанных в параметре <code>at</code>. Этот параметр можно пропустить, если подписи совпадают с местоположениями меток</li>
<li><code>pos</code> — координата, вдоль которой будет нарисована ось</li>
<li><code>lty</code> — тип линии</li>
<li><code>col</code> — цвет линии и меток</li>
<li><code>las</code> — расположение подписей параллельно (<span class="math inline">\(0\)</span>) или перпендикулярно (<span class="math inline">\(2\)</span>) оси</li>
<li><code>tck</code> — длина метки относительно размера графика. Отрицательные значения дают метки, выходящие за пределы графика. положительные — внутрь графика. <span class="math inline">\(0\)</span> убирает метки, <span class="math inline">\(1\)</span> рисует линии сетки.</li>
</ul>
<p>При ручном построении осей полезно сразу же нарисовать рамку вокруг графика, используя функцию <code>box()</code>.</p>
<p>Например:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="graphics.html#cb60-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, </span>
<span id="cb60-2"><a href="graphics.html#cb60-2"></a>     tab<span class="op">$</span>Каспийское,</span>
<span id="cb60-3"><a href="graphics.html#cb60-3"></a>     <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb60-4"><a href="graphics.html#cb60-4"></a>     <span class="dt">axes =</span> <span class="ot">FALSE</span>)</span>
<span id="cb60-5"><a href="graphics.html#cb60-5"></a></span>
<span id="cb60-6"><a href="graphics.html#cb60-6"></a><span class="kw">axis</span>(<span class="dt">side =</span> <span class="dv">1</span>, </span>
<span id="cb60-7"><a href="graphics.html#cb60-7"></a>     <span class="dt">at =</span> <span class="kw">seq</span>(<span class="kw">min</span>(tab<span class="op">$</span>Год), <span class="kw">max</span>(tab<span class="op">$</span>Год), <span class="dv">1</span>),</span>
<span id="cb60-8"><a href="graphics.html#cb60-8"></a>     <span class="dt">tck =</span> <span class="fl">-0.02</span>,</span>
<span id="cb60-9"><a href="graphics.html#cb60-9"></a>     <span class="dt">labels =</span> <span class="ot">FALSE</span>) <span class="co"># разметим ось X через 1 год, но рисовать подписи не будем</span></span>
<span id="cb60-10"><a href="graphics.html#cb60-10"></a></span>
<span id="cb60-11"><a href="graphics.html#cb60-11"></a><span class="kw">axis</span>(<span class="dt">side =</span> <span class="dv">1</span>, </span>
<span id="cb60-12"><a href="graphics.html#cb60-12"></a>     <span class="dt">at =</span> <span class="kw">seq</span>(<span class="kw">min</span>(tab<span class="op">$</span>Год), <span class="kw">max</span>(tab<span class="op">$</span>Год), <span class="dv">3</span>), <span class="co"># а подписи расставим через 3 года</span></span>
<span id="cb60-13"><a href="graphics.html#cb60-13"></a>     <span class="dt">tck =</span> <span class="dv">0</span>) <span class="co"># но рисовать метки не будем</span></span>
<span id="cb60-14"><a href="graphics.html#cb60-14"></a></span>
<span id="cb60-15"><a href="graphics.html#cb60-15"></a><span class="co"># разметим ось Y через 1 млрд куб. м., округлив предварительно минимальное и максимальное значение до ближайшего целого снизу и сверху соответственно</span></span>
<span id="cb60-16"><a href="graphics.html#cb60-16"></a><span class="kw">axis</span>(<span class="dt">side =</span> <span class="dv">2</span>, </span>
<span id="cb60-17"><a href="graphics.html#cb60-17"></a>     <span class="dt">at =</span> <span class="kw">seq</span>(<span class="kw">floor</span>(<span class="kw">min</span>(tab<span class="op">$</span>Каспийское)), <span class="kw">ceiling</span>(<span class="kw">max</span>(tab<span class="op">$</span>Каспийское)), <span class="dv">1</span>),</span>
<span id="cb60-18"><a href="graphics.html#cb60-18"></a>     <span class="dt">tck =</span> <span class="fl">-0.02</span>) </span>
<span id="cb60-19"><a href="graphics.html#cb60-19"></a></span>
<span id="cb60-20"><a href="graphics.html#cb60-20"></a><span class="kw">box</span>() <span class="co"># добавим рамку для красоты</span></span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/manual-1.png" width="672" /></p>
<p>Для размещения сетки координат существует функция <code>grid(nx = NULL, ny = nx, col = "lightgray", lty = "dotted", lwd = par("lwd"), equilogs = TRUE)</code>. Как видно из набора ее параметров, сетка определяется количеством линий в горизонтальном и вертикальном направлении. Это не всегда бывает удобно, поскольку как правило мы хотим задать шаг сетки конкретной величины. По умолчанию, однако, линии сетки выбираются автоматически, как и метки:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="graphics.html#cb61-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, </span>
<span id="cb61-2"><a href="graphics.html#cb61-2"></a>     tab<span class="op">$</span>Каспийское,</span>
<span id="cb61-3"><a href="graphics.html#cb61-3"></a>     <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb61-4"><a href="graphics.html#cb61-4"></a>     <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb61-5"><a href="graphics.html#cb61-5"></a><span class="kw">grid</span>()</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<p>Вы, разумеется, можете поменять их количество, однако <strong>R</strong> не будет за вас согласовывать шаг сетки и шаг меток осей, поскольку метки генерируются на стадии рисования <code>plot()</code> или <code>axis()</code> и не запоминаются.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="graphics.html#cb62-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, </span>
<span id="cb62-2"><a href="graphics.html#cb62-2"></a>     tab<span class="op">$</span>Каспийское,</span>
<span id="cb62-3"><a href="graphics.html#cb62-3"></a>    <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb62-4"><a href="graphics.html#cb62-4"></a>    <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb62-5"><a href="graphics.html#cb62-5"></a><span class="kw">grid</span>(<span class="dv">10</span>, <span class="dv">5</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<p>Функция <code>grid()</code> на самом деле является оберткой функции <code>abline()</code>, которая позволяет рисовать произвольные линии на графике. Дана функция предоставляет следующие возможности построения линий и серий линий:</p>
<ul>
<li><code>a, b</code> — коэффициенты уравнения <span class="math inline">\(y = ax + b\)</span>. Таким образом можно определить только одну линию.</li>
<li><code>coef</code> — принимает вектор из двух значений, которые интерпретируются как <code>a</code> и <code>b</code>. То есть, это альтернативная форма записи предыдущего случая.</li>
<li><code>h</code> — значение (значения) координат <span class="math inline">\(y\)</span> для горизонтальной линии (серии горизонтальных линий). То есть, вы можете передать в этот параметр как одиночное значение, так и вектор значений. В зависимости это этого нарисуется одна горизонтальная линия или серия горизонтальных линий.</li>
<li><code>v</code> — значение (значения) координат <span class="math inline">\(x\)</span> для вертикальной линии (серии вертикальных линий). Работает аналогично параметру <code>h</code>.</li>
<li><code>reg</code> — сюда можно передать объект, обладающий методом <code>coef()</code>. Этот способ можно использовать для рисования линий регрессии.</li>
</ul>
<p>Предположим теперь, что вы хотите нарисовать сетку с шагом в 1 год по горизонтальной оси и шагом 1 млрд. куб. м по оси вертикальной. При этом вы также хотите, чтобы линии сетки располагались <em>под</em> графиком, а не поверх его. Также необходимо выделить особым цветом значение в 10 млрд м<span class="math inline">\(^3\)</span> по оси <span class="math inline">\(Y\)</span>. Для этого выполним следующую последовательность действий:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="graphics.html#cb63-1"></a><span class="kw">plot</span>(tab<span class="op">$</span>Год, </span>
<span id="cb63-2"><a href="graphics.html#cb63-2"></a>     tab<span class="op">$</span>Каспийское, </span>
<span id="cb63-3"><a href="graphics.html#cb63-3"></a>     <span class="dt">type=</span><span class="st">&quot;n&quot;</span>) <span class="co"># режим &#39;n&#39; позволяет ничего не рисовать, но заложить поле графика в соответствии с данными, указанными в параметрах x и y</span></span>
<span id="cb63-4"><a href="graphics.html#cb63-4"></a></span>
<span id="cb63-5"><a href="graphics.html#cb63-5"></a><span class="co"># Вычисляем линии сетки</span></span>
<span id="cb63-6"><a href="graphics.html#cb63-6"></a>xlines =<span class="st"> </span><span class="kw">seq</span>(<span class="kw">min</span>(tab<span class="op">$</span>Год), <span class="kw">max</span>(tab<span class="op">$</span>Год), <span class="dv">1</span>)</span>
<span id="cb63-7"><a href="graphics.html#cb63-7"></a>ylines =<span class="st"> </span><span class="kw">seq</span>(<span class="kw">ceiling</span>(<span class="kw">min</span>(tab<span class="op">$</span>Каспийское)),</span>
<span id="cb63-8"><a href="graphics.html#cb63-8"></a>              <span class="kw">floor</span>(<span class="kw">max</span>(tab<span class="op">$</span>Каспийское)), <span class="dv">1</span>)</span>
<span id="cb63-9"><a href="graphics.html#cb63-9"></a></span>
<span id="cb63-10"><a href="graphics.html#cb63-10"></a><span class="co"># Рисуем линии сетки</span></span>
<span id="cb63-11"><a href="graphics.html#cb63-11"></a><span class="kw">abline</span>(<span class="dt">h =</span> ylines, <span class="dt">v =</span> xlines, <span class="dt">col =</span> <span class="st">&quot;lightgray&quot;</span>)</span>
<span id="cb63-12"><a href="graphics.html#cb63-12"></a></span>
<span id="cb63-13"><a href="graphics.html#cb63-13"></a><span class="co"># Рисуем график</span></span>
<span id="cb63-14"><a href="graphics.html#cb63-14"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, </span>
<span id="cb63-15"><a href="graphics.html#cb63-15"></a>     tab<span class="op">$</span>Каспийское, </span>
<span id="cb63-16"><a href="graphics.html#cb63-16"></a>     <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>)</span>
<span id="cb63-17"><a href="graphics.html#cb63-17"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, </span>
<span id="cb63-18"><a href="graphics.html#cb63-18"></a>     tab<span class="op">$</span>Каспийское,</span>
<span id="cb63-19"><a href="graphics.html#cb63-19"></a>     <span class="dt">pch =</span> <span class="dv">20</span>,</span>
<span id="cb63-20"><a href="graphics.html#cb63-20"></a>     <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>)</span>
<span id="cb63-21"><a href="graphics.html#cb63-21"></a></span>
<span id="cb63-22"><a href="graphics.html#cb63-22"></a><span class="co"># Выделяем значение 10 по оси Y:</span></span>
<span id="cb63-23"><a href="graphics.html#cb63-23"></a><span class="kw">abline</span>(<span class="dt">h =</span> <span class="dv">10</span>, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb63-24"><a href="graphics.html#cb63-24"></a></span>
<span id="cb63-25"><a href="graphics.html#cb63-25"></a><span class="co"># Рисуем дополнительно рамку, т.к. сетку координат мы рисовали после графика</span></span>
<span id="cb63-26"><a href="graphics.html#cb63-26"></a><span class="kw">box</span>()</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/manualaxes-1.png" width="672" /></p>
</div>
<div id="annotations" class="section level3">
<h3><span class="header-section-number">5.6.3</span> Аннотации данных (текст на графике)</h3>
<p>Аннотации данных добавляются на график с помощью функции <code>text()</code>. В качестве трех обязательных аргументов ей необходимо передать координаты точек размещения текста, и вектор подписей. Также полезным будет указать параметр <code>pos=</code>, отвечающий за размещение аннотации относительно точки. Значения <code>pos</code>, равные 1, 2, 3 и 4, соответствуют размещению снизу, слева, сверху и справа от точки:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="graphics.html#cb64-1"></a><span class="kw">text</span>(tab<span class="op">$</span>Год, </span>
<span id="cb64-2"><a href="graphics.html#cb64-2"></a>     tab<span class="op">$</span>Каспийское,</span>
<span id="cb64-3"><a href="graphics.html#cb64-3"></a>     <span class="dt">labels =</span> tab<span class="op">$</span>Каспийское,</span>
<span id="cb64-4"><a href="graphics.html#cb64-4"></a>     <span class="dt">cex =</span> <span class="fl">0.75</span>,</span>
<span id="cb64-5"><a href="graphics.html#cb64-5"></a>     <span class="dt">pos =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<blockquote>
<p>К сожалению, стандартный механизм размещения аннотаций пакета <code>graphics</code> не обладает возможностью устранения конфликтов подписей. Однако это возможно для графиков, построенных с помощью библиотек <a href="https://cran.r-project.org/web/packages/lattice/index.html">lattice</a> и <a href="https://cran.r-project.org/web/packages/ggplot2/index.html">ggplot2</a>. Для этого можно воспользоваться пакетом <a href="https://cran.r-project.org/web/packages/directlabels/index.html">directlabels</a> или <a href="https://cran.r-project.org/web/packages/ggrepel/index.html">ggrepel</a>.</p>
</blockquote>
</div>
</div>
<div id="legend" class="section level2">
<h2><span class="header-section-number">5.7</span> Легенда</h2>
<p>Легенда к графику размещается с помощью функции <code>legend()</code>. Эта функция принимает несколько аргументов, включая: местоположение, заголовок, названия элементов, графические параметры. Местоположение может быть задано координатами <span class="math inline">\((x,y)\)</span> в системе координат графика, но удобнее пользоваться следующими предопределенными константами: <code>"bottomright"</code>, <code>"bottom"</code>, <code>"bottomleft"</code>, <code>"left"</code>, <code>"topleft"</code>, <code>"top"</code>, <code>"topright"</code>, <code>"right"</code>, <code>"center"</code>.</p>
<p>Чтобы в легенде появились точки, необходимо задать параметр <code>pch=</code>. Для линейной легенды, следует задать, соответственно, параметр <code>lty =</code> и/или <code>lwd =</code>. Каждый из этих параметров должен быть вектором по количеству элементов легенды:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="graphics.html#cb65-1"></a><span class="kw">par</span>(<span class="dt">mar =</span> margins.default)</span>
<span id="cb65-2"><a href="graphics.html#cb65-2"></a></span>
<span id="cb65-3"><a href="graphics.html#cb65-3"></a><span class="co"># Найдем ограничивающий прямоугольник вокруг всех рядов данных</span></span>
<span id="cb65-4"><a href="graphics.html#cb65-4"></a>xrange =<span class="st"> </span><span class="kw">range</span>(tab<span class="op">$</span>Год)</span>
<span id="cb65-5"><a href="graphics.html#cb65-5"></a>yrange =<span class="st"> </span><span class="kw">range</span>(tab<span class="op">$</span>Каспийское, tab<span class="op">$</span>Карское, tab<span class="op">$</span>Азовское)</span>
<span id="cb65-6"><a href="graphics.html#cb65-6"></a></span>
<span id="cb65-7"><a href="graphics.html#cb65-7"></a><span class="co"># Построим пустой график с разметкой осей и всеми заголовками</span></span>
<span id="cb65-8"><a href="graphics.html#cb65-8"></a><span class="kw">plot</span>(xrange, </span>
<span id="cb65-9"><a href="graphics.html#cb65-9"></a>     yrange, </span>
<span id="cb65-10"><a href="graphics.html#cb65-10"></a>     <span class="dt">type=</span><span class="st">&quot;n&quot;</span>, </span>
<span id="cb65-11"><a href="graphics.html#cb65-11"></a>     <span class="dt">main=</span><span class="st">&quot;Объем сброса загрязненных сточных вод&quot;</span>, </span>
<span id="cb65-12"><a href="graphics.html#cb65-12"></a>     <span class="dt">xlab=</span><span class="st">&quot;Год&quot;</span>, </span>
<span id="cb65-13"><a href="graphics.html#cb65-13"></a>     <span class="dt">ylab=</span><span class="st">&quot;млрд.куб.м&quot;</span>,</span>
<span id="cb65-14"><a href="graphics.html#cb65-14"></a>     <span class="dt">cex.axis=</span><span class="fl">0.8</span>, </span>
<span id="cb65-15"><a href="graphics.html#cb65-15"></a>     <span class="dt">cex.lab=</span><span class="fl">0.7</span>, </span>
<span id="cb65-16"><a href="graphics.html#cb65-16"></a>     <span class="dt">cex.main=</span><span class="fl">0.9</span>, </span>
<span id="cb65-17"><a href="graphics.html#cb65-17"></a>     <span class="dt">col.lab =</span> <span class="st">&quot;grey50&quot;</span>, </span>
<span id="cb65-18"><a href="graphics.html#cb65-18"></a>     <span class="dt">fg =</span> <span class="st">&quot;grey40&quot;</span>)</span>
<span id="cb65-19"><a href="graphics.html#cb65-19"></a></span>
<span id="cb65-20"><a href="graphics.html#cb65-20"></a><span class="co"># Добавим на график сетку координат</span></span>
<span id="cb65-21"><a href="graphics.html#cb65-21"></a><span class="kw">grid</span>()</span>
<span id="cb65-22"><a href="graphics.html#cb65-22"></a></span>
<span id="cb65-23"><a href="graphics.html#cb65-23"></a><span class="co"># Добавим на график данные</span></span>
<span id="cb65-24"><a href="graphics.html#cb65-24"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>)</span>
<span id="cb65-25"><a href="graphics.html#cb65-25"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Каспийское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;red3&quot;</span>)</span>
<span id="cb65-26"><a href="graphics.html#cb65-26"></a></span>
<span id="cb65-27"><a href="graphics.html#cb65-27"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb65-28"><a href="graphics.html#cb65-28"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Карское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb65-29"><a href="graphics.html#cb65-29"></a></span>
<span id="cb65-30"><a href="graphics.html#cb65-30"></a><span class="kw">points</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Азовское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;steelblue&quot;</span>)</span>
<span id="cb65-31"><a href="graphics.html#cb65-31"></a><span class="kw">lines</span>(tab<span class="op">$</span>Год, tab<span class="op">$</span>Азовское, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;steelblue&quot;</span>)</span>
<span id="cb65-32"><a href="graphics.html#cb65-32"></a></span>
<span id="cb65-33"><a href="graphics.html#cb65-33"></a><span class="co"># Определим положение, названия и цвета:</span></span>
<span id="cb65-34"><a href="graphics.html#cb65-34"></a>main =<span class="st"> &quot;Море&quot;</span></span>
<span id="cb65-35"><a href="graphics.html#cb65-35"></a>location =<span class="st"> &quot;topright&quot;</span></span>
<span id="cb65-36"><a href="graphics.html#cb65-36"></a>labels =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Каспийское&quot;</span>, <span class="st">&quot;Карское&quot;</span>, <span class="st">&quot;Азовское&quot;</span>)</span>
<span id="cb65-37"><a href="graphics.html#cb65-37"></a>colors =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;red3&quot;</span>, <span class="st">&quot;forestgreen&quot;</span>, <span class="st">&quot;steelblue&quot;</span>)</span>
<span id="cb65-38"><a href="graphics.html#cb65-38"></a></span>
<span id="cb65-39"><a href="graphics.html#cb65-39"></a><span class="co"># Если цвет передать в параметр fill, то по умолчанию</span></span>
<span id="cb65-40"><a href="graphics.html#cb65-40"></a><span class="co"># нарисуются цветовые плашки:</span></span>
<span id="cb65-41"><a href="graphics.html#cb65-41"></a><span class="kw">legend</span>(location, labels, <span class="dt">title =</span> main, <span class="dt">fill=</span>colors)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/caspianlegend-1.png" width="672" /></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="graphics.html#cb66-1"></a>pts =<span class="st"> </span><span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>) <span class="co"># каждый элемент показывается точкой типа 20</span></span>
<span id="cb66-2"><a href="graphics.html#cb66-2"></a>lns =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>) <span class="co"># каждый элемент показывается линией толщиной 1</span></span>
<span id="cb66-3"><a href="graphics.html#cb66-3"></a></span>
<span id="cb66-4"><a href="graphics.html#cb66-4"></a><span class="co"># теперь посмотрим на легенду (она нарисуется поверх старой)</span></span>
<span id="cb66-5"><a href="graphics.html#cb66-5"></a><span class="kw">legend</span>(location, labels, <span class="dt">title =</span> main, <span class="dt">col =</span> colors, <span class="dt">pch =</span> pts, <span class="dt">lwd =</span> lns)</span></code></pre></div>
<p><img src="05-Graphics_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>Более подробно с разнообразными опциями размещения легенды на графике вы можете познакомиться, набрав в консоли команду <code>?legend</code>.</p>
</div>
<div id="questions_tasks_graphics" class="section level2">
<h2><span class="header-section-number">5.8</span> Контрольные вопросы и упражнения</h2>
<div id="questions_graphics" class="section level3">
<h3><span class="header-section-number">5.8.1</span> Вопросы</h3>
<ol style="list-style-type: decimal">
<li>Какая функция базового пакета R отвечает за построение стандартных графиков (диаграмм рассеяния, линейных)?</li>
<li>Какие функции стандартной библиотеки R позволяют построить: столбчатые диаграммы, круговые секторные диаграммы, гистограммы?</li>
<li>Как задать интервал или количество интервалов гистограммы?</li>
<li>Можно ли разместить столбчатую диаграмму горизыонтально? Если да, то как?</li>
<li>Какая функция отвечает за установку параметров графической подсистемы?</li>
<li>Как установить поля вокруг графиков?</li>
<li>Как развернуть подписи на столбчатой диаграмме перпендикулярно оси?</li>
<li>Как установить запрет на экспоненциальное представление больших чисел при рисовании графиков?</li>
<li>Какой параметр отвечает за установку цвета в функциях построения графиков стандартной библиотеки R?</li>
<li>Какие параметры отвечают за установку толщины и типа линии на графиках?</li>
<li>Какие параметры отвечают за установку размера и типа значка на диаграммах рассеяния?</li>
<li>Как совместить несколько графиков на одной сетке координат?</li>
<li>Какая функция рисует рамку вокруг графика?</li>
<li>Какая функция отвечает за рисование сетки координат?</li>
<li>Как установить равный масштаб по осям графика?</li>
<li>Какие параметры позволяют масштабировать текст элементов графика, таких как подписи координат, осей, заголовков и подзаголовков?</li>
<li>Назовите способы задания цвета в R.</li>
<li>Как сделать цвет в R полупрозрачным?</li>
<li>Назовите стандартные цветовые палитры R.</li>
<li>Как сгенерировать последовательность из нужного количества цветов между заданными опорными цветами?</li>
<li>Какая функция позволяет разместить легенду на графике?</li>
<li>Как сделать так, чтобы в легенде показывались точки? Линии? Цветовые плашки?</li>
</ol>
</div>
<div id="tasks_graphics" class="section level3">
<h3><span class="header-section-number">5.8.2</span> Упражнения</h3>
<ol style="list-style-type: decimal">
<li><p>Постройте для набора данных <em>quakes</em> пакета <strong>datasets</strong> гистограммы распределения глубин и магнитуд, а также диаграмму рассеяния для двух этих характеристик.</p></li>
<li><p>На портале открытых данных Тульской области есть <a href="https://www.opendata71.ru/opendata/7107096442-stateforestregisterTularegion/table"><strong>данные</strong></a> о распределении площади лесов и запасов древесины по преобладающим породам и группам возраста. Скачайте эти данные в виде таблицы CSV и постройте по ним столбчатую диаграмму для категории <code>Площадь земель, занятых лесными насаждениями (покрытых лесной растительностью), всего</code>. Подберите цвета, попробуйте изменить ориентировку столбцов на горизонтальную.</p></li>
<li><p>Таблица <em>storms</em> из пакета <strong>dplyr</strong> содержит данные трекинга тропических циклонов c 1975 по 2015 год. Извлеките из нее данные по одному выбранному циклону и постройте на основе график, показывающий трек прохождения циклона по координатам (линии), поверх которой точками показана скорость ветра (чем больше скорость, тем больше диаметр кружка). Добавьте координатную сетку на график и аннотации скорости.</p></li>
<li><p>Загрузите <a href="https://raw.githubusercontent.com/tsamsonov/r-geo-course/master/data/okruga.csv"><strong>файл CSV</strong></a> с данными по населению федеральных округов России. Постройте график изменения численности населения округов (8 графиков на одном рисунке) с легендой. Постройте круговую диаграмму распределения населения по федеральным округам за один из годов.</p></li>
</ol>
<table>
<tbody>
<tr class="odd">
<td><em>Самсонов Т.Е.</em> <strong>Визуализация и анализ географических данных на языке R.</strong> М.: Географический факультет МГУ, 2019. DOI: <a href="https://doi.org/10.5281/zenodo.901911">10.5281/zenodo.901911</a></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tech.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advgraphics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"edit": "https://github.com/tsamsonov/r-geo-course/edit/master/%s"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
